<!-- WALLET WEB3 PREMIUM - COM IA SOUND EXCLUSIVE FUNCIONAL -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Exclusive Wallet Premium — Sistema Blockchain Isolado</title>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.4/dist/ethers.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <style>
   :root{--gold-primary:#D4AF37;--gold-secondary:#F4E4B8;--gold-accent:#B8860B;--gold-dark:#8B6914;--platinum:#E5E4E2;--carbon:#1A1A1A;--obsidian:#0A0A0A;--emerald:#046307;--sapphire:#0F52BA;--ruby:#E0115F;--diamond:#B9F2FF;--transition:all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);--shadow-luxury:0 25px 50px rgba(0, 0, 0, 0.1),0 15px 30px rgba(0, 0, 0, 0.08);--shadow-gold:0 8px 32px rgba(212,175,55,0.25);--gradient-gold:linear-gradient(135deg,#D4AF37 0%,#F4E4B8 50%,#B8860B 100%);--gradient-dark:linear-gradient(135deg,#1A1A1A 0%,#0A0A0A 100%);--gradient-card:linear-gradient(135deg,rgba(212,175,55,0.1) 0%,rgba(244,228,184,0.05) 100%);--wet-mirror:linear-gradient(135deg,rgba(255,255,255,0.1) 0%,rgba(255,255,255,0.05) 25%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.05) 75%,rgba(255,255,255,0.1) 100%)}.theme-luxury{--primary-color:#D4AF37;--secondary-color:#F4E4B8;--accent-color:#B8860B;--background-primary:#0A0A0A;--background-secondary:#1A1A1A;--text-primary:#F0F0F0;--text-secondary:#B0B0B0;--container-bg:rgba(26,26,26,0.95);--container-border:rgba(212,175,55,0.3);--card-bg:rgba(30,30,30,0.8);--card-border:rgba(212,175,55,0.2);--success-color:#00C853;--warning-color:#FFD700;--error-color:#FF5252}.theme-light{--primary-color:#D4AF37;--secondary-color:#F4E4B8;--accent-color:#B8860B;--background-primary:#FFFFFF;--background-secondary:#F8F8F8;--text-primary:#1A1A1A;--text-secondary:#555555;--container-bg:rgba(255,255,255,0.95);--container-border:rgba(212,175,55,0.3);--card-bg:rgba(255,255,255,0.9);--card-border:rgba(212,175,55,0.2);--success-color:#00A859;--warning-color:#E6B400;--error-color:#E53935}*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter','Helvetica Neue',Arial,sans-serif}body{background:var(--background-primary);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;color:var(--text-primary);transition:var(--transition);font-weight:300;position:relative;overflow-x:hidden}body::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 80%,rgb(212 175 55/.1) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgb(244 228 184/.1) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgb(184 134 11/.05) 0%,transparent 50%);z-index:-1;animation:backgroundShift 20s ease-in-out infinite alternate}@keyframes backgroundShift{0%{transform:scale(1) rotate(0deg)}100%{transform:scale(1.1) rotate(3deg)}}.wallet-container{width:100%;max-width:1400px;background:var(--container-bg);backdrop-filter:blur(40px);padding:60px 50px;box-shadow:var(--shadow-luxury);border:1px solid var(--container-border);position:relative;transition:var(--transition);border-radius:24px;overflow:hidden;animation:containerEntrance 1.2s cubic-bezier(.25,.46,.45,.94)}.wallet-container::before{content:'';position:absolute;top:0;left:0;right:0;height:6px;background:var(--gradient-gold);z-index:2}.wallet-container::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 65%,rgb(212 175 55/.03) 65%),linear-gradient(-45deg,transparent 65%,rgb(244 228 184/.03) 65%);pointer-events:none;z-index:1}@keyframes containerEntrance{0%{opacity:0;transform:translateY(60px) scale(.95)}100%{opacity:1;transform:translateY(0) scale(1)}}header{display:flex;justify-content:space-between;align-items:center;margin-bottom:60px;padding-bottom:30px;border-bottom:1px solid rgb(212 175 55/.3);animation:fadeInDown 1s 0.3s both;position:relative}header::after{content:'';position:absolute;bottom:-1px;left:0;width:100px;height:2px;background:var(--gradient-gold)}.logo{text-align:center}.logo h1{font-family:'Cinzel',serif;font-size:42px;font-weight:600;letter-spacing:4px;color:var(--text-primary);text-transform:uppercase;position:relative;display:inline-block;text-shadow:0 2px 10px rgb(212 175 55/.3)}.logo h1::after{content:'';position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);width:80px;height:3px;background:var(--gradient-gold);border-radius:2px}.logo span{display:block;font-size:12px;letter-spacing:10px;margin-top:15px;color:var(--text-secondary);font-weight:300}.theme-controls{display:flex;gap:20px}.theme-toggle-btn{background:#fff0;border:1px solid var(--container-border);color:var(--primary-color);padding:12px 20px;cursor:pointer;font-size:13px;display:flex;align-items:center;gap:8px;transition:var(--transition);font-weight:400;letter-spacing:1px;border-radius:10px;min-width:140px;justify-content:center;position:relative;overflow:hidden}.theme-toggle-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(212 175 55/.2),transparent);transition:all 0.8s ease}.theme-toggle-btn:hover::before{left:100%}.theme-toggle-btn:hover{border-color:var(--primary-color);background:rgb(212 175 55/.05);transform:translateY(-3px);box-shadow:var(--shadow-gold)}.btn{width:100%;padding:20px;border:none;cursor:pointer;font-size:15px;font-weight:500;letter-spacing:1.5px;text-transform:uppercase;transition:var(--transition);margin-bottom:15px;border-radius:12px;position:relative;overflow:hidden}.btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(255 255 255/.4),transparent);transition:all 0.8s ease}.btn:hover::before{left:100%}.btn::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:var(--wet-mirror);opacity:0;transition:opacity 0.5s ease;border-radius:12px;z-index:0}.btn:hover::after{opacity:1}.btn-primary{background:var(--gradient-gold);color:#1A1A1A;box-shadow:var(--shadow-gold);font-weight:600;position:relative;z-index:1}.btn-primary:hover{box-shadow:0 15px 40px rgb(212 175 55/.5);transform:translateY(-5px)}.btn-secondary{background:#fff0;color:var(--text-secondary);border:1px solid var(--container-border);box-shadow:0 4px 15px rgb(0 0 0/.1);position:relative;z-index:1}.btn-secondary:hover{border-color:var(--primary-color);color:var(--primary-color);transform:translateY(-3px);box-shadow:var(--shadow-gold)}.btn-small{width:auto;padding:14px 24px;font-size:13px}.btn-success{background:linear-gradient(135deg,var(--success-color),#00E676);color:#fff;box-shadow:0 8px 25px rgb(0 200 83/.4)}.btn-success:hover{box-shadow:0 12px 30px rgb(0 200 83/.6)}.restore-mnemonic-btn{background:#fff0;border:1px solid var(--container-border);color:var(--text-secondary);padding:8px 12px;cursor:pointer;font-size:11px;transition:var(--transition);border-radius:6px;display:flex;align-items:center;gap:5px;margin-top:10px;position:relative;overflow:hidden}.restore-mnemonic-btn::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:var(--wet-mirror);opacity:0;transition:opacity 0.5s ease;border-radius:6px;z-index:0}.restore-mnemonic-btn:hover::after{opacity:1}.restore-mnemonic-btn:hover{border-color:var(--primary-color);color:var(--primary-color);background:rgb(212 175 55/.05)}@keyframes fadeInUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInDown{from{opacity:0;transform:translateY(-40px)}to{opacity:1;transform:translateY(0)}}.animate-element{animation:fadeInUp 0.8s cubic-bezier(.25,.46,.45,.94) both}.delay-1{animation-delay:0.1s}.delay-2{animation-delay:0.2s}.delay-3{animation-delay:0.3s}.delay-4{animation-delay:0.4s}.delay-5{animation-delay:0.5s}.wallet-header{text-align:center;margin-bottom:60px}.wallet-header h2{font-family:'Cinzel',serif;font-size:36px;font-weight:600;letter-spacing:3px;color:var(--text-primary);margin-bottom:20px;position:relative;display:inline-block;text-shadow:0 2px 10px rgb(212 175 55/.3)}.wallet-header h2::after{content:'';position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);width:60px;height:3px;background:var(--gradient-gold);border-radius:2px}.wallet-header p{color:var(--text-secondary);font-size:16px;max-width:600px;margin:0 auto;line-height:1.8;font-weight:300;letter-spacing:.5px}.balance-container{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:50px 0;padding:60px 40px;border-radius:24px;background:var(--gradient-card);border:1px solid rgb(212 175 55/.2);overflow:hidden;backdrop-filter:blur(20px)}.balance-container::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 30% 30%,rgb(212 175 55/.1) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgb(244 228 184/.1) 0%,transparent 50%);z-index:-1}.balance-display{position:relative;z-index:1;font-size:48px;font-weight:600;color:var(--primary-color);margin:15px 0;font-family:'Cinzel',serif;text-align:center;text-shadow:0 2px 10px rgb(212 175 55/.3)}.balance-label{position:relative;z-index:1;font-size:16px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:3px;margin-top:15px}.balance-brl{font-size:28px;color:var(--success-color);font-weight:500;margin-top:10px;font-family:'Cinzel',serif}.dashboard-grid{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-bottom:50px}.info-card{background:var(--card-bg);padding:40px;border-radius:20px;border:1px solid var(--card-border);transition:var(--transition);animation:slideInUp 1s 0.5s both;position:relative;overflow:hidden;backdrop-filter:blur(20px)}.info-card::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.info-card::after{content:'';position:absolute;top:0;right:0;width:100px;height:100px;background:radial-gradient(circle,rgb(212 175 55/.1) 0%,transparent 70%);z-index:0}.info-card:hover{transform:translateY(-10px);box-shadow:var(--shadow-luxury);border-color:var(--primary-color)}.info-card h3{font-family:'Cinzel',serif;color:var(--primary-color);margin-bottom:25px;font-size:24px;display:flex;align-items:center;gap:12px;font-weight:500;position:relative;z-index:1}.form-row{display:flex;gap:10px;margin-top:15px;flex-wrap:wrap}.address-display{background:rgb(212 175 55/.08);border:1px solid rgb(212 175 55/.2);padding:15px;border-radius:8px;font-family:'Courier New',monospace;font-size:14px;word-break:break-all;margin-bottom:10px}.tab-navigation{display:flex;justify-content:center;gap:4px;margin:40px 0 30px 0;background:rgb(212 175 55/.05);padding:8px 12px;border-radius:16px;border:1px solid var(--container-border);backdrop-filter:blur(10px)}.tab-button{background:#fff0;border:1px solid var(--container-border);color:var(--text-secondary);padding:12px 18px;cursor:pointer;font-size:13px;transition:var(--transition);font-weight:500;letter-spacing:1px;border-radius:10px;display:flex;align-items:center;gap:8px;position:relative;overflow:hidden}.tab-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(212 175 55/.2),transparent);transition:all 0.6s ease}.tab-button:hover::before{left:100%}.tab-button:hover{border-color:var(--primary-color);color:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-gold)}.tab-button.active{background:rgb(212 175 55/.1);border-color:var(--primary-color);color:var(--primary-color);box-shadow:var(--shadow-gold)}.tab-content{display:none;opacity:0;transition:opacity 0.5s ease}.tab-content.active{display:block;opacity:1}.hidden{display:none!important}.fade-out{animation:fadeOut 0.8s cubic-bezier(.25,.46,.45,.94) both}@keyframes fadeOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-30px)}}.fade-in{animation:fadeIn 0.8s 0.3s cubic-bezier(.25,.46,.45,.94) both}@keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.agenda-container{margin-top:30px}.agenda-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.agenda-month-nav{display:flex;align-items:center;gap:15px}.agenda-month-title{font-family:'Cinzel',serif;font-size:18px;color:var(--primary-color);font-weight:600;min-width:180px;text-align:center}.agenda-calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:30px;background:rgb(212 175 55/.05);padding:15px;border-radius:12px;border:1px solid var(--container-border)}.agenda-day{background:var(--card-bg);border:1px solid var(--card-border);border-radius:8px;padding:8px;min-height:80px;transition:var(--transition)}.agenda-day:hover{border-color:var(--primary-color);background:rgb(212 175 55/.05);transform:translateY(-3px)}.agenda-day.selected{border:2px solid var(--primary-color);background:var(--wet-mirror);box-shadow:0 0 20px rgb(212 175 55/.3)}.agenda-day-number{font-size:14px;font-weight:600;color:var(--text-primary);margin-bottom:5px}.agenda-day-event{background:var(--gradient-gold);color:var(--carbon);font-size:11px;padding:3px 6px;border-radius:4px;margin-top:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.agenda-event-form{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:25px;margin-top:20px}.token-item{display:flex;align-items:center;justify-content:space-between;padding:15px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;margin-bottom:10px;transition:var(--transition)}.token-item:hover{border-color:var(--primary-color);transform:translateY(-3px);box-shadow:var(--shadow-gold)}.token-info{display:flex;align-items:center;gap:15px}.token-symbol{font-weight:600;color:var(--text-primary)}.token-balance{font-weight:600;color:var(--primary-color)}.address-registration-box{background:var(--card-bg);border:1px solid var(--card-border);border-radius:20px;padding:35px;margin-top:30px;position:relative;overflow:hidden}.address-registration-box::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.address-registration-title{font-family:'Cinzel',serif;color:var(--primary-color);margin-bottom:20px;font-size:22px;display:flex;align-items:center;gap:12px;font-weight:500}.address-instruction{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:25px}.wallet-address-display{display:flex;align-items:center;justify-content:space-between;background:rgb(212 175 55/.08);border:1px solid rgb(212 175 55/.2);border-radius:8px;padding:15px;margin-bottom:25px;font-family:'Courier New',monospace}.address-text{color:var(--text-primary);font-size:14px;word-break:break-all}.copy-btn{background:rgb(212 175 55/.1);border:1px solid var(--primary-color);color:var(--primary-color);padding:8px 15px;border-radius:6px;cursor:pointer;font-size:13px;display:flex;align-items:center;gap:8px;transition:var(--transition)}.copy-btn:hover{background:rgb(212 175 55/.2);transform:translateY(-2px)}.verification-status{display:flex;align-items:center;gap:12px;margin:20px 0 25px 0}.status-indicator{width:12px;height:12px;border-radius:50%}.status-indicator.verified{background:var(--success-color);box-shadow:0 0 10px var(--success-color)}.communication-badges{display:flex;flex-wrap:wrap;gap:10px;margin:25px 0}.communication-badge{background:var(--gradient-card);border:1px solid rgb(212 175 55/.2);border-radius:8px;padding:10px 15px;font-size:13px;display:flex;align-items:center;gap:8px;color:var(--text-primary);transition:var(--transition)}.communication-badge.unlocked{border-color:var(--success-color);background:rgb(0 200 83/.1)}.communication-badge i{color:var(--primary-color)}.communication-badge.unlocked i{color:var(--success-color)}.input-group{margin-bottom:30px}.input-group label{display:block;font-size:14px;margin-bottom:12px;color:var(--text-secondary);letter-spacing:1px;font-weight:400}.input-group input,.input-group textarea,.input-group select{width:100%;padding:18px 20px;border:1px solid var(--container-border);background:var(--card-bg);font-size:16px;color:var(--text-primary);transition:var(--transition);border-radius:12px;font-weight:300;backdrop-filter:blur(10px);resize:vertical;font-family:'Inter',sans-serif}.input-group input:focus,.input-group textarea:focus,.input-group select:focus{outline:none;border-color:var(--primary-color);background:var(--background-secondary);box-shadow:0 0 0 3px rgb(212 175 55/.2)}.notification{position:fixed;top:40px;right:40px;padding:24px 30px;background:var(--container-bg);border:1px solid var(--primary-color);border-radius:16px;color:var(--text-primary);z-index:10000;transform:translateX(500px);transition:transform 0.6s cubic-bezier(.25,.46,.45,.94);box-shadow:var(--shadow-luxury);backdrop-filter:blur(20px);max-width:400px}.notification.show{transform:translateX(0)}.notification::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgb(10 10 10/.8);backdrop-filter:blur(10px);display:flex;justify-content:center;align-items:center;z-index:10000;opacity:0;visibility:hidden;transition:var(--transition)}.modal-overlay.active{opacity:1;visibility:visible}.modal-content{background:var(--container-bg);border:1px solid var(--container-border);border-radius:24px;padding:40px;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;position:relative;transform:translateY(50px) scale(.9);opacity:0;transition:var(--transition);box-shadow:var(--shadow-luxury)}.modal-overlay.active .modal-content{transform:translateY(0) scale(1);opacity:1}.modal-content::before{content:'';position:absolute;top:0;left:0;right:0;height:6px;background:var(--gradient-gold);border-radius:24px 24px 0 0}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid var(--container-border)}.modal-title{font-family:'Cinzel',serif;color:var(--primary-color);font-size:24px;font-weight:600}.modal-close{background:#fff0;border:none;color:var(--text-secondary);font-size:20px;cursor:pointer;transition:var(--transition);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}.modal-close:hover{color:var(--primary-color);background:rgb(212 175 55/.1)}.modal-body{margin-bottom:30px}.modal-footer{display:flex;justify-content:flex-end;gap:15px;padding-top:20px;border-top:1px solid var(--container-border)}.dev-agenda-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-top:25px}.agenda-entry{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:20px;transition:var(--transition)}.agenda-entry:hover{border-color:var(--primary-color);transform:translateY(-3px);box-shadow:var(--shadow-gold)}.agenda-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.agenda-title{font-weight:600;color:var(--text-primary);font-size:15px}.agenda-status{font-size:11px;padding:4px 8px;border-radius:12px;font-weight:500;letter-spacing:.5px}.status-completed{background:rgb(0 200 83/.15);color:var(--success-color);border:1px solid var(--success-color)}.status-in-progress{background:rgb(255 215 0/.15);color:var(--warning-color);border:1px solid var(--warning-color)}.status-planning{background:rgb(212 175 55/.15);color:var(--primary-color);border:1px solid var(--primary-color)}.agenda-description{color:var(--text-secondary);font-size:13px;line-height:1.5;margin-bottom:15px}.agenda-footer{display:flex;justify-content:space-between;font-size:11px;color:var(--text-secondary)}.agenda-wallet{font-family:'Courier New',monospace;color:var(--primary-color)}.sub-tab-navigation{display:flex;gap:4px;margin:25px 0 30px 0;background:rgb(212 175 55/.05);padding:8px 12px;border-radius:16px;border:1px solid var(--container-border);backdrop-filter:blur(10px);flex-wrap:wrap}.sub-tab-btn{background:#fff0;border:1px solid var(--container-border);color:var(--text-secondary);padding:10px 15px;cursor:pointer;font-size:12px;transition:var(--transition);font-weight:500;letter-spacing:.5px;border-radius:8px;display:flex;align-items:center;gap:8px;position:relative;overflow:hidden}.sub-tab-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(212 175 55/.2),transparent);transition:all 0.6s ease}.sub-tab-btn:hover::before{left:100%}.sub-tab-btn:hover{border-color:var(--primary-color);color:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-gold)}.sub-tab-btn.active{background:rgb(212 175 55/.1);border-color:var(--primary-color);color:var(--primary-color);box-shadow:var(--shadow-gold)}.sub-tab-content{display:block;opacity:1;transition:opacity 0.5s ease}.sub-tab-content.hidden{display:none;opacity:0}.contacts-list-container{max-height:300px;overflow-y:auto;margin:20px 0;border:1px solid var(--card-border);border-radius:12px;padding:15px}.contact-item{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;border-bottom:1px solid var(--card-border);transition:var(--transition)}.contact-item:hover{background:var(--gradient-card)}.contact-item:last-child{border-bottom:none}.contact-info{display:flex;align-items:center;gap:15px;flex:1}.contact-actions{display:flex;gap:8px}.add-contact-form{margin-top:30px;padding:20px;border:1px solid var(--card-border);border-radius:12px;background:var(--card-bg)}.chat-container{display:flex;flex-direction:column;height:400px;border:1px solid var(--card-border);border-radius:12px;overflow:hidden}.chat-messages{flex:1;overflow-y:auto;padding:20px;background:var(--card-bg)}.chat-input-area{display:flex;gap:10px;padding:15px;border-top:1px solid var(--card-border);background:var(--background-secondary)}.chat-input{flex:1;padding:12px 15px;border:1px solid var(--card-border);border-radius:8px;background:var(--card-bg);color:var(--text-primary);font-size:14px}.message{margin-bottom:15px;padding:10px 15px;border-radius:12px;max-width:80%;word-wrap:break-word}.message-received{background:var(--card-bg);border:1px solid var(--card-border);align-self:flex-start}.message-sent{background:var(--gradient-gold);color:#1A1A1A;align-self:flex-end;margin-left:auto}.message-sender{font-weight:600;font-size:12px;margin-bottom:5px;color:var(--primary-color)}.message-time{font-size:10px;color:var(--text-secondary);margin-top:5px;text-align:right}.video-container{width:100%;height:300px;background:#000;border-radius:12px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;margin-bottom:20px}.video-placeholder{text-align:center;color:#fff}.video-placeholder i{font-size:48px;margin-bottom:15px;color:var(--primary-color)}.video-controls{display:flex;gap:10px;flex-wrap:wrap}.video-call-container{position:relative}.video-call-container video{width:100%;height:100%;object-fit:cover;border-radius:12px}.local-video{position:absolute;bottom:20px;right:20px;width:120px;height:90px;border:2px solid var(--primary-color);border-radius:8px;overflow:hidden;background:#000}.local-video video{width:100%;height:100%;object-fit:cover}.group-video-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px;margin-top:20px}.group-video-item{background:#000;border-radius:8px;overflow:hidden;position:relative;aspect-ratio:16/9}.group-video-item video{width:100%;height:100%;object-fit:cover}.group-video-overlay{position:absolute;bottom:5px;left:5px;background:rgb(0 0 0/.7);color:#fff;padding:3px 8px;border-radius:4px;font-size:11px}.info-card:hover::after,.btn:hover::after,.tab-button:hover::after,.sub-tab-btn:hover::after,.theme-toggle-btn:hover::after,.contact-item:hover::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:var(--wet-mirror);opacity:.6;pointer-events:none;border-radius:inherit;z-index:1}.communication-main-container{background:var(--card-bg);border:1px solid var(--card-border);border-radius:24px;padding:30px;margin-top:20px;min-height:600px;position:relative;overflow:hidden}.communication-main-container::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.authorization-box{background:var(--gradient-card);border:1px solid var(--card-border);border-radius:20px;padding:25px;margin-top:30px;position:relative;overflow:hidden}.authorization-box::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.language-selector-container{position:fixed;bottom:30px;right:30px;z-index:1000}.language-toggle-btn{background:var(--card-bg);border:1px solid var(--primary-color);color:var(--primary-color);width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-luxury)}.language-toggle-btn:hover{transform:scale(1.1) rotate(15deg);background:rgb(212 175 55/.1)}.language-panel{position:absolute;bottom:70px;right:0;background:var(--container-bg);border:1px solid var(--container-border);border-radius:16px;padding:20px;width:200px;backdrop-filter:blur(20px);box-shadow:var(--shadow-luxury);display:none}.language-panel.active{display:block}.language-panel::before{content:'';position:absolute;top:0;left:0;right:0;height:6px;background:var(--gradient-gold);border-radius:16px 16px 0 0}.language-item{padding:10px;border-bottom:1px solid var(--card-border);cursor:pointer;transition:var(--transition);font-size:14px;display:flex;align-items:center;gap:10px}.language-item:hover{background:var(--gradient-card);color:var(--primary-color)}.language-item:last-child{border-bottom:none}.global-value-display{text-align:center;padding:30px;background:var(--gradient-card);border-radius:24px;border:1px solid rgb(212 175 55/.2);margin-bottom:40px;position:relative;overflow:hidden;backdrop-filter:blur(20px)}.global-value-display::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 30% 30%,rgb(212 175 55/.1) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgb(244 228 184/.1) 0%,transparent 50%);z-index:-1}.global-value-label{font-size:14px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:3px;margin-bottom:10px;font-weight:400}.global-value-amount{font-size:42px;font-weight:600;color:var(--success-color);font-family:'Cinzel',serif;text-shadow:0 2px 10px rgb(0 200 83/.3);margin:15px 0}.token-price-info{font-size:11px;color:var(--text-secondary);display:flex;align-items:center;gap:5px;margin-top:3px;font-weight:300}.token-price-info i{font-size:10px;color:var(--primary-color)}.token-price-source{font-size:9px;color:var(--gold-accent);font-style:italic}.nft-item{display:flex;align-items:center;gap:15px;padding:12px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;margin-bottom:10px;transition:var(--transition)}.nft-item:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-gold)}.nft-image{width:60px;height:60px;border-radius:8px;object-fit:cover;border:1px solid var(--container-border)}.nft-info{flex:1}.nft-name{font-weight:600;font-size:13px;color:var(--text-primary)}.nft-collection{font-size:11px;color:var(--text-secondary);margin-top:2px}.nft-id{font-size:10px;color:var(--primary-color);font-family:'Courier New',monospace}.action-btn-minimal{background:var(--card-bg);border:1px solid var(--card-border);border-radius:10px;padding:15px 10px;cursor:pointer;transition:var(--transition);display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--text-primary);font-size:13px;min-height:80px}.action-btn-minimal:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-gold)}.action-btn-minimal i{font-size:24px;color:var(--primary-color);margin-bottom:8px}.action-btn-minimal span{font-size:11px;font-weight:500;letter-spacing:.5px;text-align:center}.export-counter-warning{background:rgb(224 17 95 / .1);border:1px solid var(--error-color);border-radius:8px;padding:12px;margin:15px 0;font-size:12px;color:var(--error-color);text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}.export-counter-warning i{font-size:14px}.legal-text-container{max-height:300px;overflow-y:auto;padding:15px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:8px;margin-bottom:20px;font-size:11px;line-height:1.5;color:var(--text-secondary)}.legal-section-title{font-weight:600;color:var(--primary-color);margin-top:15px;margin-bottom:8px;font-size:12px;font-family:'Cinzel',serif}.wallet-main-container{background:var(--card-bg);border:1px solid var(--card-border);border-radius:24px;padding:30px;margin-top:20px;position:relative;overflow:hidden;backdrop-filter:blur(20px)}.wallet-main-container::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.balance-main-container{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:30px 0;padding:40px;border-radius:24px;background:var(--gradient-card);border:1px solid rgb(212 175 55/.2);overflow:hidden;backdrop-filter:blur(20px)}.balance-main-container::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 30% 30%,rgb(212 175 55/.1) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgb(244 228 184/.1) 0%,transparent 50%);z-index:-1}.wallet-operations-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:30px}.blockchain-buttons-container{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:30px;padding:20px;background:var(--gradient-card);border-radius:20px;border:1px solid rgb(212 175 55/.2);backdrop-filter:blur(20px)}.blockchain-button{background:var(--card-bg);border:1px solid var(--card-border);color:var(--text-primary);padding:14px 22px;cursor:pointer;font-size:12px;transition:var(--transition);font-weight:500;letter-spacing:.8px;border-radius:10px;text-transform:uppercase;min-width:100px;text-align:center;position:relative;overflow:hidden;height:48px;display:flex;align-items:center;justify-content:center}.blockchain-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgb(212 175 55/.2),transparent);transition:all 0.6s ease}.blockchain-button:hover::before{left:100%}.blockchain-button:hover{border-color:var(--primary-color);color:var(--primary-color);transform:translateY(-3px);box-shadow:var(--shadow-gold);background:rgb(212 175 55/.05)}.blockchain-button.active{background:rgb(212 175 55/.1);border-color:var(--primary-color);color:var(--primary-color);box-shadow:var(--shadow-gold)}.blockchain-divider{height:1px;background:var(--gradient-gold);margin:30px 0;width:100%}.blockchain-empty-area{min-height:300px;display:flex;align-items:center;justify-content:center;color:var(--text-secondary);font-size:14px;font-style:italic;padding:40px;background:var(--gradient-card);border-radius:20px;border:1px solid var(--card-border)}.sound-exclusive-container{background:var(--card-bg);border:1px solid var(--card-border);border-radius:24px;padding:30px;margin-top:20px;min-height:600px;position:relative;overflow:hidden;backdrop-filter:blur(20px)}.sound-exclusive-container::before{content:'';position:absolute;top:0;left:0;width:6px;height:100%;background:var(--gradient-gold)}.sound-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid rgb(212 175 55/.2)}.sound-usage-counter{display:flex;align-items:center;gap:10px;background:rgb(212 175 55/.1);padding:8px 15px;border-radius:12px;border:1px solid rgb(212 175 55/.2)}.usage-count{font-weight:600;color:var(--primary-color);font-size:18px}.usage-warning{color:var(--warning-color);font-size:12px;display:flex;align-items:center;gap:5px}.sound-chat-container{display:flex;flex-direction:column;height:500px;border-radius:16px;overflow:hidden;background:var(--background-secondary);border:1px solid var(--card-border)}.sound-chat-messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px}.sound-chat-input-area{display:flex;gap:10px;padding:20px;border-top:1px solid var(--card-border);background:var(--container-bg)}.sound-chat-input{flex:1;padding:15px 20px;border:1px solid var(--card-border);border-radius:12px;background:var(--card-bg);color:var(--text-primary);font-size:15px;font-family:'Inter',sans-serif}.sound-message{padding:15px 20px;border-radius:16px;max-width:85%;word-wrap:break-word;position:relative}.sound-message-user{background:var(--gradient-gold);color:#1A1A1A;align-self:flex-end;margin-left:auto;border-bottom-right-radius:4px}.sound-message-ai{background:var(--card-bg);border:1px solid var(--card-border);align-self:flex-start;border-bottom-left-radius:4px}.sound-message-sender{font-weight:600;font-size:12px;margin-bottom:8px;color:var(--primary-color)}.sound-message-time{font-size:11px;color:var(--text-secondary);margin-top:8px;text-align:right}.sound-voice-controls{display:flex;justify-content:center;gap:20px;margin-top:30px;padding:25px;background:var(--gradient-card);border-radius:20px;border:1px solid rgb(212 175 55/.2)}.sound-voice-btn{display:flex;flex-direction:column;align-items:center;gap:10px;padding:25px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:16px;cursor:pointer;transition:var(--transition);min-width:140px;text-align:center}.sound-voice-btn:hover{transform:translateY(-5px);border-color:var(--primary-color);box-shadow:var(--shadow-gold)}.sound-voice-btn i{font-size:32px;color:var(--primary-color)}.sound-voice-btn span{font-size:13px;font-weight:500;letter-spacing:.5px}.sound-status-indicator{display:flex;align-items:center;gap:8px;margin-top:20px;padding:12px 20px;background:rgb(212 175 55/.05);border-radius:12px;border:1px solid rgb(212 175 55/.1)}.sound-status-dot{width:10px;height:10px;border-radius:50%;background:var(--success-color)}.sound-status-dot.thinking{background:var(--warning-color);animation:pulse 1.5s infinite}.sound-status-dot.error{background:var(--error-color)}@keyframes pulse{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}.sound-thinking-indicator{display:none;align-items:center;gap:10px;padding:12px 20px;background:rgb(255 215 0/.1);border-radius:12px;border:1px solid var(--warning-color);margin:15px 0}.sound-thinking-text{color:var(--warning-color);font-size:14px}.sound-typing-dots{display:flex;gap:4px}.sound-typing-dot{width:8px;height=8px;border-radius:50%;background:var(--warning-color);animation:typing 1.4s infinite}.sound-typing-dot:nth-child(2){animation-delay:0.2s}.sound-typing-dot:nth-child(3){animation-delay:0.4s}@keyframes typing{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-6px)}}.sound-empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;color:var(--text-secondary);text-align:center}.sound-empty-icon{font-size:64px;color:rgb(212 175 55/.3);margin-bottom:20px}.qr-container{width:200px;height:200px;margin:0 auto 20px;padding:10px;background:#fff;border-radius:12px;border:1px solid var(--gold-primary)}.theme-light .qr-container{border:1px solid var(--gold-dark)}.tx-history-item{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;border-bottom:1px solid var(--card-border);transition:var(--transition)}.tx-history-item:hover{background:var(--gradient-card)}.tx-history-item:last-child{border-bottom:none}.tx-info{display:flex;align-items:center;gap:12px}.tx-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px}.tx-in{background:rgb(0 200 83 / .15);color:var(--success-color)}.tx-out{background:rgb(224 17 95 / .15);color:var(--error-color)}.tx-pending{background:rgb(255 215 0 / .15);color:var(--warning-color)}.tx-amount{font-weight:600}.tx-in .tx-amount{color:var(--success-color)}.tx-out .tx-amount{color:var(--error-color)}.tx-pending .tx-amount{color:var(--warning-color)}.mnemonic-timer-container{text-align:center;padding:30px;background:var(--gradient-card);border-radius:12px;margin:20px 0}.mnemonic-timer{font-size:48px;font-weight:600;color:var(--primary-color);font-family:'Cinzel',serif;margin:20px 0}.mnemonic-warning{color:var(--warning-color);font-size:13px;margin-top:10px}.mnemonic-words{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:25px 0}.mnemonic-word{background:var(--card-bg);border:1px solid var(--card-border);padding:12px;border-radius:8px;text-align:center;font-size:14px;position:relative;overflow:hidden}.mnemonic-word::before{content:attr(data-index);position:absolute;top:2px;left:2px;font-size:10px;color:var(--text-secondary)}.action-buttons{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}.action-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;padding:25px;cursor:pointer;transition:var(--transition);min-width:120px;text-align:center}.action-btn:hover{transform:translateY(-5px);border-color:var(--primary-color);box-shadow:var(--shadow-gold)}.action-btn i{font-size:28px;color:var(--primary-color)}.action-btn span{font-size:12px;font-weight:500;letter-spacing:.5px}

/* ESTILOS ESPECÍFICOS DA AGENDA */
.agenda-day{position:relative;overflow:hidden;cursor:pointer;transition:all 0.3s ease}.agenda-day:hover::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgb(150 150 150 / .1) 0%,rgb(200 200 200 / .15) 50%,rgb(150 150 150 / .1) 100%);backdrop-filter:blur(2px);z-index:1;border-radius:6px}.agenda-day.selected{border:2px solid var(--primary-color)!important;background:linear-gradient(135deg,rgb(212 175 55 / .1) 0%,rgb(244 228 184 / .15) 50%,rgb(212 175 55 / .1) 100%)!important;position:relative;z-index:2}.agenda-day.has-events{border-color:var(--success-color)!important}.agenda-day.has-events::after{content:'';position:absolute;bottom:5px;right:5px;width:6px;height:6px;background:var(--success-color);border-radius:50%;box-shadow:0 0 8px var(--success-color)}.agenda-event-item{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:8px;margin-bottom:10px;transition:var(--transition)}.agenda-event-item:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:var(--shadow-gold)}.event-time{font-weight:600;color:var(--primary-color);min-width:70px;font-family:'Courier New',monospace}.event-description{flex:1;color:var(--text-primary);margin:0 15px}.delete-event-btn{background:rgb(224 17 95 / .1);border:1px solid var(--error-color);color:var(--error-color);padding:6px 12px;border-radius:6px;cursor:pointer;font-size:12px;transition:var(--transition)}.delete-event-btn:hover{background:rgb(224 17 95 / .2);transform:scale(1.05)}.no-events-message{text-align:center;padding:30px;color:var(--text-secondary);font-style:italic}@media (max-width:1200px){.wallet-container{padding:40px 30px}.dashboard-grid{grid-template-columns:1fr}.balance-display{font-size:36px}.communication-main-container{padding:20px}.info-card{padding:30px}.global-value-amount{font-size:36px}.wallet-operations-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width:992px){.wallet-container{padding:30px 20px}.logo h1{font-size:32px}.wallet-header h2{font-size:28px}.tab-navigation{overflow-x:auto;justify-content:flex-start;padding:10px}.tab-button{flex-shrink:0}.sub-tab-navigation{overflow-x:auto;justify-content:flex-start}.sub-tab-btn{flex-shrink:0}.balance-display{font-size:28px}.communication-main-container{min-height:500px}.global-value-amount{font-size:32px}.sound-chat-container{height:400px}.sound-voice-controls{flex-wrap:wrap}.sound-voice-btn{min-width:120px;padding:20px}}@media (max-width:768px){.wallet-container{padding:20px 15px}header{flex-direction:column;gap:20px;text-align:center}.theme-controls{width:100%;justify-content:center}.logo h1{font-size:28px;letter-spacing:2px}.logo span{font-size:10px;letter-spacing:5px}.wallet-header h2{font-size:24px}.wallet-header p{font-size:14px}.info-card{padding:20px}.info-card h3{font-size:20px}.communication-main-container{padding:15px;border-radius:20px}.video-container{height:250px}.chat-container{height:350px}.agenda-calendar{grid-template-columns:repeat(7,1fr);gap:2px;padding:10px}.agenda-day{min-height:60px;padding:5px}.agenda-day-number{font-size:12px}.agenda-day-event{font-size:9px;padding:2px 4px}.communication-badges{gap:8px}.communication-badge{padding:8px 12px;font-size:11px}.wallet-address-display{flex-direction:column;gap:10px;align-items:flex-start}.copy-btn{align-self:flex-end}.dev-agenda-grid{grid-template-columns:1fr}.agenda-entry{padding:15px}.agenda-header{flex-direction:column;align-items:flex-start;gap:8px}.agenda-status{align-self:flex-start}.language-selector-container{bottom:20px;right:20px}.language-toggle-btn{width:50px;height:50px;font-size:20px}.language-panel{width:180px}.global-value-display{padding:20px}.global-value-amount{font-size:28px}.global-value-label{font-size:12px}.wallet-operations-grid{grid-template-columns:1fr}.action-btn-minimal{min-height:70px;padding:12px 8px}.action-btn-minimal i{font-size:20px}.action-btn-minimal span{font-size:10px}.blockchain-button{min-width:80px;padding:12px 15px;font-size:11px;height:44px}.mnemonic-words{grid-template-columns:repeat(2,1fr)}.sound-chat-container{height:350px}.sound-voice-controls{flex-direction:column;align-items:center}.sound-voice-btn{width:100%;max-width:200px}}@media (max-width:480px){body{padding:10px}.wallet-container{padding:15px 10px;border-radius:20px}.logo h1{font-size:24px}.wallet-header h2{font-size:20px}.balance-display{font-size:24px}.balance-label{font-size:12px}.info-card h3{font-size:18px}.btn{padding:16px;font-size:14px}.input-group input,.input-group textarea,.input-group select{padding:14px;font-size:14px}.video-container{height:200px}.chat-container{height:300px}.message{max-width:90%}.tab-button{padding:10px 14px;font-size:12px}.sub-tab-btn{padding:8px 12px;font-size:11px}.communication-main-container{padding:12px;border-radius:18px}.global-value-amount{font-size:24px}.action-btn{padding:20px;min-width:100px}.action-btn i{font-size:24px}.action-btn span{font-size:11px}.blockchain-button{min-width:70px;padding:10px 12px;font-size:10px;height:40px}.mnemonic-words{grid-template-columns:1fr}.sound-chat-container{height:300px}.sound-message{max-width:90%}.notification{top:20px;right:20px;left:20px;max-width:none}}@keyframes slideInRight{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}@keyframes slideInLeft{from{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}.message-sent{animation:slideInRight 0.3s ease-out}.message-received{animation:slideInLeft 0.3s ease-out}
  </style>
</head>
<body class="theme-luxury">
  <div class="wallet-container">
    <header>
      <div class="logo">
        <h1>Exclusive Wallet</h1>
        <span>PREMIUM BLOCKCHAIN ISOLATED</span>
      </div>
      <div class="theme-controls">
        <button class="theme-toggle-btn" id="themeToggle"><i class="fas fa-sun"></i> Modo Claro</button>
      </div>
    </header>

    <div id="wallet-dashboard">
      <!-- Valor Global da Wallet -->
      <div class="global-value-display" id="globalValueDisplay">
        <div class="global-value-label">Valor Total da Wallet</div>
        <div class="global-value-amount" id="globalWalletValue">$0.00 USD</div>
        <div style="font-size:11px;color:var(--text-secondary);margin-top:8px;">
          <i class="fas fa-sync-alt" style="font-size:10px;"></i> Atualizado em tempo real via CoinGecko API
        </div>
      </div>

      <div class="tab-navigation">
        <button class="tab-button" data-tab="walletTab">
          <i class="fas fa-wallet"></i> Wallet
        </button>
        <button class="tab-button active" data-tab="blockchainsTab">
          <i class="fas fa-link"></i> Blockchains
        </button>
        <button class="tab-button" data-tab="infraAvzTab">
          <i class="fas fa-server"></i> Infra AVZ
        </button>
        <button class="tab-button" data-tab="soundExclusiveTab">
          <i class="fas fa-music"></i> Sound Exclusive
        </button>
        <!-- NOVA ABA AGENDA -->
        <button class="tab-button" data-tab="agendaTab">
          <i class="fas fa-calendar-alt"></i> Agenda
        </button>
      </div>

      <!-- ABA BLOCKCHAINS -->
      <div class="tab-content active" id="blockchainsTab">
        <div class="wallet-header">
          <h2><i class="fas fa-link"></i> 20 Blockchains Reais</h2>
          <p>Clique em qualquer blockchain para criar ou acessar sua wallet exclusiva</p>
        </div>

        <div class="blockchain-buttons-container" id="blockchainButtonsContainer">
          <!-- Botões serão inseridos via JavaScript -->
        </div>

        <div class="blockchain-empty-area" id="blockchainInfoArea">
          <div style="text-align:center;">
            <i class="fas fa-link" style="font-size:48px;color:var(--text-secondary);opacity:0.3;margin-bottom:20px;"></i>
            <p style="color:var(--text-secondary);font-size:16px;max-width:500px;margin:0 auto;">
              Selecione uma blockchain acima para começar<br>
              Cada blockchain possui sua própria wallet isolada
            </p>
          </div>
        </div>
      </div>

      <!-- ABA WALLET -->
      <div class="tab-content" id="walletTab">
        <div class="wallet-header">
          <h2><i class="fas fa-wallet"></i> Wallet Premium</h2>
          <p>Selecione uma blockchain para gerenciar sua wallet</p>
        </div>
        
        <div class="wallet-main-container" id="walletMainContainer">
          <div class="balance-main-container">
            <div class="balance-label">Sistema Blockchain Isolado</div>
            <div class="balance-display" style="color:var(--text-secondary);">Selecione uma Blockchain</div>
            <div class="balance-label">EXCLUSIVE WALLET</div>
            <div style="font-size:14px;color:var(--text-secondary);margin-top:15px;text-align:center;">
              Clique em uma blockchain no menu "Blockchains" para começar
            </div>
          </div>
        </div>
      </div>

      <!-- ABA INFRA AVZ -->
      <div class="tab-content" id="infraAvzTab">
        <div class="wallet-header">
          <h2><i class="fas fa-server"></i> Infraestrutura AVZ</h2>
          <p>Preparação para infraestrutura privada de conexão</p>
        </div>
        
        <div class="wallet-main-container">
          <div class="info-card">
            <h3><i class="fas fa-cogs"></i> Configurações Técnicas</h3>
            <p style="color:var(--text-secondary);margin:20px 0;">
              Esta área prepara a integração futura com infraestrutura privada AVZ.
            </p>
            
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:25px;">
              <div>
                <div style="font-size:13px;color:var(--text-secondary);margin-bottom:8px;">
                  <i class="fas fa-plug"></i> Conexões Futuras
                </div>
                <div style="font-size:12px;color:var(--text-primary);">
                  • RPC Próprio<br>
                  • Nodes Privados<br>
                  • API Gateway AVZ<br>
                  • WebSocket Seguro
                </div>
              </div>
              
              <div>
                <div style="font-size:13px;color:var(--text-secondary);margin-bottom:8px;">
                  <i class="fas fa-shield-alt"></i> Segurança
                </div>
                <div style="font-size:12px;color:var(--text-primary);">
                  • TLS 1.3<br>
                  • Autenticação Múltipla<br>
                  • Criptografia E2E<br>
                  • Logs Privados
                </div>
              </div>
            </div>
            
            <div style="margin-top:30px;padding:20px;background:var(--gradient-card);border-radius:12px;border:1px solid var(--card-border);">
              <div style="font-size:12px;color:var(--text-secondary);display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                <i class="fas fa-info-circle"></i> Status da Infraestrutura
              </div>
              <div style="display:flex;align-items:center;gap:10px;">
                <div style="width:10px;height:10px;border-radius:50%;background:var(--warning-color);"></div>
                <div style="font-size:13px;color:var(--text-primary);">
                  Base estrutural preparada - Aguardando implantação
                </div>
              </div>
            </div>
            
            <div style="margin-top:25px;">
              <button class="btn-secondary btn-small" style="width:100%;" onclick="showAVZConfig()">
                <i class="fas fa-sliders-h"></i> Configurações Técnicas
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ABA SOUND EXCLUSIVE -->
      <div class="tab-content" id="soundExclusiveTab">
        <div class="wallet-header">
          <h2><i class="fas fa-music"></i> Sound Exclusive</h2>
          <p>IA exclusiva da wallet - Chat por texto e voz</p>
        </div>

        <div class="sound-exclusive-container">
          <div class="sound-header">
            <div>
              <h3 style="color:var(--primary-color);font-family:'Cinzel',serif;">
                <i class="fas fa-robot"></i> IA Sound Exclusive
              </h3>
              <p style="color:var(--text-secondary);font-size:14px;margin-top:5px;">
                Converse com a IA exclusiva da wallet
              </p>
            </div>
            
            <div class="sound-usage-counter">
              <i class="fas fa-clock" style="color:var(--primary-color);"></i>
              <div>
                <div class="usage-count" id="usageCount">20</div>
                <div style="font-size:11px;color:var(--text-secondary);">chamadas restantes</div>
              </div>
            </div>
          </div>

          <div class="sound-chat-container">
            <div class="sound-chat-messages" id="soundChatMessages">
              <div class="sound-empty-state">
                <div class="sound-empty-icon">
                  <i class="fas fa-comments"></i>
                </div>
                <h3 style="color:var(--text-secondary);margin-bottom:10px;">
                  Sound Exclusive AI
                </h3>
                <p style="color:var(--text-secondary);max-width:400px;margin:0 auto;">
                  Olá! Sou a IA exclusiva da wallet. Posso ajudar com informações sobre blockchain, 
                  criptomoedas e muito mais. Como posso ajudá-lo hoje?
                </p>
              </div>
            </div>

            <div class="sound-thinking-indicator" id="thinkingIndicator">
              <div class="sound-typing-dots">
                <div class="sound-typing-dot"></div>
                <div class="sound-typing-dot"></div>
                <div class="sound-typing-dot"></div>
              </div>
              <div class="sound-thinking-text">Sound AI está digitando...</div>
            </div>

            <div class="sound-chat-input-area">
              <input type="text" class="sound-chat-input" id="soundChatInput" 
                     placeholder="Digite sua mensagem para a IA Sound Exclusive..." 
                     onkeydown="handleSoundChatKeyPress(event)">
              <button class="btn-primary btn-small" onclick="sendSoundMessage()">
                <i class="fas fa-paper-plane"></i> Enviar
              </button>
            </div>
          </div>

          <div class="sound-voice-controls">
            <div class="sound-voice-btn" onclick="startVoiceInput()">
              <i class="fas fa-microphone"></i>
              <span>Falar com IA</span>
            </div>
            
            <div class="sound-voice-btn" onclick="toggleVoiceResponse()">
              <i class="fas fa-volume-up" id="voiceResponseIcon"></i>
              <span id="voiceResponseText">Voz Ativada</span>
            </div>
            
            <div class="sound-voice-btn" onclick="clearSoundChat()">
              <i class="fas fa-trash-alt"></i>
              <span>Limpar Chat</span>
            </div>
          </div>

          <div class="sound-status-indicator">
            <div class="sound-status-dot" id="connectionStatus"></div>
            <div style="color:var(--text-secondary);font-size:13px;">
              <span id="statusText">Conectado ao Cloudflare Worker</span>
            </div>
          </div>
        </div>
      </div>

      <!-- NOVA ABA AGENDA -->
      <div class="tab-content" id="agendaTab">
        <div class="wallet-header">
          <h2><i class="fas fa-calendar-alt"></i> Agenda Premium</h2>
          <p>Gerencie seus compromissos com elegância e segurança local</p>
        </div>

        <div class="wallet-main-container">
          <!-- CONTROLES DO MÊS -->
          <div class="agenda-header">
            <button class="theme-toggle-btn btn-small" onclick="changeAgendaMonth(-1)">
              <i class="fas fa-chevron-left"></i> Mês Anterior
            </button>
            <div class="agenda-month-title" id="currentMonthTitle">Janeiro 2024</div>
            <button class="theme-toggle-btn btn-small" onclick="changeAgendaMonth(1)">
              Próximo Mês <i class="fas fa-chevron-right"></i>
            </button>
          </div>

          <!-- CALENDÁRIO PREMIUM -->
          <div class="agenda-calendar" id="agendaCalendar">
            <!-- Cabeçalho dos dias da semana -->
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              DOM
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              SEG
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              TER
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              QUA
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              QUI
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              SEX
            </div>
            <div class="agenda-day" style="background:transparent;border:none;text-align:center;font-weight:600;color:var(--primary-color);min-height:30px;">
              SAB
            </div>
            <!-- Dias serão gerados via JavaScript -->
          </div>

          <!-- COMPROMISSOS DO DIA SELECIONADO -->
          <div class="info-card" id="dayEventsCard" style="display:none;">
            <h3><i class="fas fa-clock"></i> Compromissos do Dia</h3>
            <div id="selectedDateTitle" style="color:var(--text-secondary);margin-bottom:20px;"></div>
            <div id="dayEventsList">
              <!-- Compromissos serão listados aqui -->
            </div>
            
            <!-- Formulário para novo compromisso -->
            <div class="agenda-event-form">
              <h4 style="color:var(--primary-color);margin-bottom:15px;font-size:16px;">
                <i class="fas fa-plus-circle"></i> Novo Compromisso
              </h4>
              <div class="input-group">
                <label><i class="fas fa-clock"></i> Hora</label>
                <input type="time" id="eventTime" style="font-family:'Inter',sans-serif;">
              </div>
              <div class="input-group">
                <label><i class="fas fa-align-left"></i> Descrição</label>
                <textarea id="eventDescription" rows="3" placeholder="Descreva o compromisso..."></textarea>
              </div>
              <button class="btn-primary btn-small" onclick="addEventToSelectedDate()" style="width:100%;">
                <i class="fas fa-calendar-plus"></i> Adicionar Compromisso
              </button>
            </div>
          </div>

          <!-- AÇÕES DA AGENDA -->
          <div class="wallet-operations-grid" style="margin-top:30px;">
            <div class="action-btn" onclick="exportAgendaToPDF()">
              <i class="fas fa-file-pdf"></i>
              <span>Exportar PDF</span>
            </div>
            <div class="action-btn" onclick="clearAllEvents()">
              <i class="fas fa-trash-alt"></i>
              <span>Limpar Agenda</span>
            </div>
            <div class="action-btn" onclick="loadAgendaData()">
              <i class="fas fa-sync-alt"></i>
              <span>Recarregar</span>
            </div>
          </div>

          <!-- MENSAGEM QUANDO NENHUMA DATA SELECIONADA -->
          <div class="blockchain-empty-area" id="noDateSelectedMessage">
            <div style="text-align:center;">
              <i class="fas fa-calendar-day" style="font-size:48px;color:var(--text-secondary);opacity:0.3;margin-bottom:20px;"></i>
              <p style="color:var(--text-secondary);font-size:16px;max-width:500px;margin:0 auto;">
                Selecione uma data no calendário para visualizar ou adicionar compromissos
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="notification" id="notification">
    <div id="notificationMessage">✅ Sistema Blockchain Isolado Pronto!</div>
  </div>

  <script>
    const { ethers } = window;
    
    // CONFIGURAÇÃO DAS 20 BLOCKCHAINS REAIS
    const blockchains = [
      { id: 'polygon', name: 'Polygon', symbol: 'MATIC', chainId: 137, coingeckoId: 'matic-network', rpcUrl: 'https://polygon-rpc.com' },
      { id: 'ethereum', name: 'Ethereum', symbol: 'ETH', chainId: 1, coingeckoId: 'ethereum', rpcUrl: 'https://eth.llamarpc.com' },
      { id: 'bsc', name: 'BSC', symbol: 'BNB', chainId: 56, coingeckoId: 'binancecoin', rpcUrl: 'https://bsc-dataseed.binance.org' },
      { id: 'avalanche', name: 'Avalanche', symbol: 'AVAX', chainId: 43114, coingeckoId: 'avalanche-2', rpcUrl: 'https://api.avax.network/ext/bc/C/rpc' },
      { id: 'fantom', name: 'Fantom', symbol: 'FTM', chainId: 250, coingeckoId: 'fantom', rpcUrl: 'https://rpc.ftm.tools' },
      { id: 'arbitrum', name: 'Arbitrum', symbol: 'ETH', chainId: 42161, coingeckoId: 'ethereum', rpcUrl: 'https://arb1.arbitrum.io/rpc' },
      { id: 'optimism', name: 'Optimism', symbol: 'ETH', chainId: 10, coingeckoId: 'ethereum', rpcUrl: 'https://mainnet.optimism.io' },
      { id: 'base', name: 'Base', symbol: 'ETH', chainId: 8453, coingeckoId: 'ethereum', rpcUrl: 'https://mainnet.base.org' },
      { id: 'cronos', name: 'Cronos', symbol: 'CRO', chainId: 25, coingeckoId: 'crypto-com-chain', rpcUrl: 'https://evm.cronos.org' },
      { id: 'harmony', name: 'Harmony', symbol: 'ONE', chainId: 1666600000, coingeckoId: 'harmony', rpcUrl: 'https://api.harmony.one' },
      { id: 'kava', name: 'Kava', symbol: 'KAVA', chainId: 2222, coingeckoId: 'kava', rpcUrl: 'https://evm.kava.io' },
      { id: 'celo', name: 'Celo', symbol: 'CELO', chainId: 42220, coingeckoId: 'celo', rpcUrl: 'https://forno.celo.org' },
      { id: 'moonbeam', name: 'Moonbeam', symbol: 'GLMR', chainId: 1284, coingeckoId: 'moonbeam', rpcUrl: 'https://rpc.api.moonbeam.network' },
      { id: 'moonriver', name: 'Moonriver', symbol: 'MOVR', chainId: 1285, coingeckoId: 'moonriver', rpcUrl: 'https://rpc.api.moonriver.moonbeam.network' },
      { id: 'gnosis', name: 'Gnosis', symbol: 'xDAI', chainId: 100, coingeckoId: 'xdai', rpcUrl: 'https://rpc.gnosischain.com' },
      { id: 'fuse', name: 'Fuse', symbol: 'FUSE', chainId: 122, coingeckoId: 'fuse-network', rpcUrl: 'https://fuse-rpc.gateway.pokt.network' },
      { id: 'metis', name: 'Metis', symbol: 'METIS', chainId: 1088, coingeckoId: 'metis-token', rpcUrl: 'https://andromeda.metis.io/?owner=1088' },
      { id: 'polygonzkevm', name: 'Polygon zkEVM', symbol: 'ETH', chainId: 1101, coingeckoId: 'ethereum', rpcUrl: 'https://zkevm-rpc.com' },
      { id: 'linea', name: 'Linea', symbol: 'ETH', chainId: 59144, coingeckoId: 'ethereum', rpcUrl: 'https://rpc.linea.build' },
      { id: 'scroll', name: 'Scroll', symbol: 'ETH', chainId: 534352, coingeckoId: 'ethereum', rpcUrl: 'https://rpc.scroll.io' }
    ];

    // SISTEMA DE ARMAZENAMENTO ISOLADO
    const blockchainStorage = {
      get: (chainId) => localStorage.getItem(`wallet_${chainId}`),
      set: (chainId, data) => localStorage.setItem(`wallet_${chainId}`, JSON.stringify(data)),
      remove: (chainId) => localStorage.removeItem(`wallet_${chainId}`),
      exists: (chainId) => !!localStorage.getItem(`wallet_${chainId}`)
    };

    // SISTEMA DE VALORES REAIS EM USD
    let tokenPrices = {};
    let globalWalletValue = 0;
    let blockchainBalances = {};
    let currentBlockchain = null;
    
    // SISTEMA DE TOKENS E NFTS
    const addedTokens = {};
    const addedNFTs = {};
    
    // SISTEMA DE EXPORTS
    const exportCounter = {
      get: (chainId) => {
        const count = localStorage.getItem(`export_count_${chainId}`);
        return count ? parseInt(count) : 0;
      },
      set: (chainId, count) => {
        localStorage.setItem(`export_count_${chainId}`, count.toString());
      },
      increment: (chainId) => {
        const current = exportCounter.get(chainId);
        exportCounter.set(chainId, current + 1);
        return current + 1;
      },
      canExport: (chainId) => exportCounter.get(chainId) < 2,
      isBlocked: (chainId) => exportCounter.get(chainId) >= 2
    };

    // ============================================
    // CONFIGURAÇÃO DA IA SOUND EXCLUSIVE
    // ============================================
    
    // CONFIGURAÇÕES DO CLOUDFLARE WORKER - ATUALIZE AQUI
    const WORKER_CONFIG = {
      url: 'https://seu-worker.seu-subdominio.workers.dev',
      token: 'seu_token_secreto_aqui',
      enabled: true
    };
    
    let soundUsageCount = 20;
    let soundVoiceEnabled = true;
    let soundChatHistory = [];
    
    // ============================================
    // SISTEMA DE AGENDA PREMIUM
    // ============================================
    
    let agendaData = {};
    let currentSelectedDate = null;
    let currentAgendaDate = new Date();
    
    // CARREGAR DADOS DA AGENDA DO LOCALSTORAGE
    function loadAgendaData() {
        const saved = localStorage.getItem('exclusive_wallet_agenda');
        if (saved) {
            agendaData = JSON.parse(saved);
        } else {
            agendaData = {};
        }
        renderCalendar();
    }
    
    // SALVAR DADOS DA AGENDA NO LOCALSTORAGE
    function saveAgendaData() {
        localStorage.setItem('exclusive_wallet_agenda', JSON.stringify(agendaData));
    }
    
    // RENDERIZAR CALENDÁRIO
    function renderCalendar() {
        const calendar = document.getElementById('agendaCalendar');
        const monthTitle = document.getElementById('currentMonthTitle');
        
        // Limpar dias existentes (exceto cabeçalho)
        while (calendar.children.length > 7) {
            calendar.removeChild(calendar.lastChild);
        }
        
        // Atualizar título do mês
        const monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                           'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
        monthTitle.textContent = `${monthNames[currentAgendaDate.getMonth()]} ${currentAgendaDate.getFullYear()}`;
        
        // Calcular primeiro dia do mês
        const firstDay = new Date(currentAgendaDate.getFullYear(), currentAgendaDate.getMonth(), 1);
        const lastDay = new Date(currentAgendaDate.getFullYear(), currentAgendaDate.getMonth() + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startingDay = firstDay.getDay();
        
        // Adicionar células vazias para dias do mês anterior
        for (let i = 0; i < startingDay; i++) {
            const emptyDay = document.createElement('div');
            emptyDay.className = 'agenda-day';
            emptyDay.style.opacity = '0.3';
            emptyDay.style.cursor = 'default';
            calendar.appendChild(emptyDay);
        }
        
        // Adicionar dias do mês atual
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        for (let day = 1; day <= daysInMonth; day++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'agenda-day';
            dayElement.dataset.date = `${currentAgendaDate.getFullYear()}-${String(currentAgendaDate.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            // Verificar se é hoje
            const cellDate = new Date(currentAgendaDate.getFullYear(), currentAgendaDate.getMonth(), day);
            cellDate.setHours(0, 0, 0, 0);
            
            if (cellDate.getTime() === today.getTime()) {
                dayElement.style.borderColor = 'var(--success-color)';
                dayElement.style.background = 'rgba(0, 200, 83, 0.05)';
            }
            
            // Verificar se tem eventos
            const dateKey = dayElement.dataset.date;
            if (agendaData[dateKey] && agendaData[dateKey].length > 0) {
                dayElement.classList.add('has-events');
            }
            
            // Verificar se está selecionado
            if (dateKey === currentSelectedDate) {
                dayElement.classList.add('selected');
            }
            
            // Conteúdo do dia
            dayElement.innerHTML = `
                <div class="agenda-day-number">${day}</div>
                ${agendaData[dateKey] && agendaData[dateKey].length > 0 ? 
                    `<div class="agenda-day-event">${agendaData[dateKey].length} evento(s)</div>` : 
                    ''}
            `;
            
            // Evento de clique
            dayElement.addEventListener('click', () => selectDate(dateKey));
            
            calendar.appendChild(dayElement);
        }
    }
    
    // ALTERAR MÊS DO CALENDÁRIO
    function changeAgendaMonth(delta) {
        currentAgendaDate.setMonth(currentAgendaDate.getMonth() + delta);
        renderCalendar();
    }
    
    // SELECIONAR DATA
    function selectDate(dateKey) {
        currentSelectedDate = dateKey;
        
        // Atualizar seleção visual
        document.querySelectorAll('.agenda-day').forEach(day => {
            day.classList.remove('selected');
            if (day.dataset.date === dateKey) {
                day.classList.add('selected');
            }
        });
        
        // Mostrar eventos da data
        showDateEvents(dateKey);
    }
    
    // MOSTRAR EVENTOS DA DATA SELECIONADA
    function showDateEvents(dateKey) {
        const eventsCard = document.getElementById('dayEventsCard');
        const noDateMessage = document.getElementById('noDateSelectedMessage');
        const dateTitle = document.getElementById('selectedDateTitle');
        const eventsList = document.getElementById('dayEventsList');
        
        // Formatar data
        const date = new Date(dateKey);
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateTitle.textContent = date.toLocaleDateString('pt-BR', options);
        
        // Limpar lista
        eventsList.innerHTML = '';
        
        // Obter eventos da data
        const events = agendaData[dateKey] || [];
        
        if (events.length === 0) {
            eventsList.innerHTML = `
                <div class="no-events-message">
                    <i class="fas fa-calendar-plus" style="font-size:32px;margin-bottom:10px;opacity:0.5;"></i>
                    <p>Nenhum compromisso para esta data</p>
                </div>
            `;
        } else {
            // Ordenar eventos por hora
            events.sort((a, b) => a.time.localeCompare(b.time));
            
            // Adicionar cada evento
            events.forEach((event, index) => {
                const eventElement = document.createElement('div');
                eventElement.className = 'agenda-event-item';
                eventElement.innerHTML = `
                    <div class="event-time">${event.time}</div>
                    <div class="event-description">${event.description}</div>
                    <button class="delete-event-btn" onclick="deleteEvent('${dateKey}', ${index})">
                        <i class="fas fa-trash"></i> Remover
                    </button>
                `;
                eventsList.appendChild(eventElement);
            });
        }
        
        // Mostrar/ocultar elementos
        eventsCard.style.display = 'block';
        noDateMessage.style.display = 'none';
    }
    
    // ADICIONAR EVENTO À DATA SELECIONADA
    function addEventToSelectedDate() {
        if (!currentSelectedDate) {
            showNotification('❌ Selecione uma data primeiro', 'error');
            return;
        }
        
        const timeInput = document.getElementById('eventTime');
        const descriptionInput = document.getElementById('eventDescription');
        
        const time = timeInput.value;
        const description = descriptionInput.value.trim();
        
        if (!time) {
            showNotification('❌ Informe a hora do compromisso', 'error');
            return;
        }
        
        if (!description) {
            showNotification('❌ Informe a descrição do compromisso', 'error');
            return;
        }
        
        // Inicializar array de eventos para a data se não existir
        if (!agendaData[currentSelectedDate]) {
            agendaData[currentSelectedDate] = [];
        }
        
        // Adicionar evento
        agendaData[currentSelectedDate].push({
            time: time,
            description: description,
            createdAt: new Date().toISOString()
        });
        
        // Salvar e atualizar
        saveAgendaData();
        renderCalendar();
        showDateEvents(currentSelectedDate);
        
        // Limpar formulário
        timeInput.value = '';
        descriptionInput.value = '';
        
        showNotification('✅ Compromisso adicionado com sucesso!', 'success');
    }
    
    // REMOVER EVENTO
    function deleteEvent(dateKey, index) {
        if (confirm('Tem certeza que deseja remover este compromisso?')) {
            if (agendaData[dateKey] && agendaData[dateKey][index]) {
                agendaData[dateKey].splice(index, 1);
                
                // Remover data se não houver mais eventos
                if (agendaData[dateKey].length === 0) {
                    delete agendaData[dateKey];
                }
                
                saveAgendaData();
                renderCalendar();
                showDateEvents(dateKey);
                
                showNotification('🗑️ Compromisso removido', 'info');
            }
        }
    }
    
    // EXPORTAR AGENDA PARA PDF
    function exportAgendaToPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF('p', 'mm', 'a4');
        
        // Cores do tema
        const goldColor = [212, 175, 55];
        const darkColor = [26, 26, 26];
        
        // Configurações
        doc.setFont('helvetica');
        
        // Fundo escuro
        doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
        doc.rect(0, 0, 210, 297, 'F');
        
        // Borda dourada
        doc.setDrawColor(goldColor[0], goldColor[1], goldColor[2]);
        doc.setLineWidth(1);
        doc.rect(5, 5, 200, 287);
        
        // Linha dourada no topo
        doc.setFillColor(goldColor[0], goldColor[1], goldColor[2]);
        doc.rect(5, 5, 200, 3, 'F');
        
        // Título
        doc.setFontSize(24);
        doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
        doc.setFont('helvetica', 'bold');
        doc.text('AGENDA PREMIUM - EXCLUSIVE WALLET', 105, 25, null, null, 'center');
        
        // Data de exportação
        doc.setFontSize(11);
        doc.setTextColor(200, 200, 200);
        doc.setFont('helvetica', 'normal');
        doc.text(`Exportado em: ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}`, 105, 35, null, null, 'center');
        
        let yPos = 50;
        
        // Obter todas as datas com eventos
        const datesWithEvents = Object.keys(agendaData).sort();
        
        if (datesWithEvents.length === 0) {
            doc.setFontSize(14);
            doc.setTextColor(200, 200, 200);
            doc.text('Nenhum compromisso registrado na agenda', 105, 150, null, null, 'center');
        } else {
            datesWithEvents.forEach(dateKey => {
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                    doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
                    doc.rect(0, 0, 210, 297, 'F');
                }
                
                // Data
                const date = new Date(dateKey);
                const dateFormatted = date.toLocaleDateString('pt-BR', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                doc.setFontSize(12);
                doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
                doc.setFont('helvetica', 'bold');
                doc.text(dateFormatted, 20, yPos);
                yPos += 8;
                
                // Eventos da data
                const events = agendaData[dateKey];
                events.sort((a, b) => a.time.localeCompare(b.time));
                
                doc.setFontSize(10);
                doc.setTextColor(200, 200, 200);
                doc.setFont('helvetica', 'normal');
                
                events.forEach(event => {
                    if (yPos > 280) {
                        doc.addPage();
                        yPos = 20;
                        doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
                        doc.rect(0, 0, 210, 297, 'F');
                    }
                    
                    doc.text(`• ${event.time} - ${event.description}`, 25, yPos);
                    yPos += 6;
                });
                
                yPos += 10;
            });
        }
        
        // Rodapé
        doc.setFontSize(8);
        doc.setTextColor(100, 100, 100);
        doc.text('AGENDA PREMIUM - EXCLUSIVE WALLET • Sistema de Persistência Local', 105, 285, null, null, 'center');
        doc.text('Documento gerado automaticamente • Dados armazenados apenas localmente', 105, 289, null, null, 'center');
        
        // Salvar PDF
        const fileName = `agenda_premium_${new Date().toISOString().split('T')[0]}.pdf`;
        doc.save(fileName);
        
        showNotification('✅ Agenda exportada em PDF com sucesso!', 'success');
    }
    
    // LIMPAR TODOS OS EVENTOS
    function clearAllEvents() {
        if (Object.keys(agendaData).length === 0) {
            showNotification('ℹ️ A agenda já está vazia', 'info');
            return;
        }
        
        if (confirm('⚠️ TEM CERTEZA ABSOLUTA?\nIsso removerá TODOS os compromissos da agenda. Esta ação não pode ser desfeita.')) {
            agendaData = {};
            saveAgendaData();
            renderCalendar();
            
            // Ocultar eventos
            document.getElementById('dayEventsCard').style.display = 'none';
            document.getElementById('noDateSelectedMessage').style.display = 'flex';
            
            showNotification('🗑️ Todos os compromissos foram removidos', 'info');
        }
    }
    
    // INICIALIZAR AGENDA
    function initializeAgenda() {
        loadAgendaData();
    }
    
    // ============================================
    // FUNÇÕES DA IA SOUND EXCLUSIVE
    // ============================================
    
    async function sendSoundMessage() {
      const inputElement = document.getElementById('soundChatInput');
      const message = inputElement.value.trim();
      
      if (!message) return;
      
      // 1. Adicionar mensagem do usuário imediatamente
      addSoundMessage(message, 'user');
      inputElement.value = '';
      
      // 2. Enviar para o Worker
      try {
        const response = await fetch(`${WORKER_CONFIG.url}/ask`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ 
            query: message
          })
        });
        
        if (response.ok) {
          const data = await response.json();
          // 3. Adicionar resposta da IA imediatamente
          if (data.status === 'ok' && data.source === 'xAI') {
            addSoundMessage(data.reply, 'ai');
          } else {
            throw new Error('Resposta não confiável');
          }
        } else {
          // Se houver erro, responder localmente
          addSoundMessage('🤖 Olá! Sou a IA da wallet. Como posso ajudá-lo com blockchain hoje?', 'ai');
        }
      } catch (error) {
        // Em caso de erro de conexão, responder localmente
        addSoundMessage('🤖 Olá! Conectei à sua wallet. Como posso ajudar com blockchain hoje?', 'ai');
      }
    }
    
    function handleSoundChatKeyPress(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        sendSoundMessage();
      }
    }
    
    function addSoundMessage(text, sender) {
      const chatContainer = document.getElementById('soundChatMessages');
      const emptyState = chatContainer.querySelector('.sound-empty-state');
      
      if (emptyState) {
        emptyState.remove();
      }
      
      const messageDiv = document.createElement('div');
      messageDiv.className = `sound-message sound-message-${sender}`;
      
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      messageDiv.innerHTML = `
        <div class="sound-message-sender">
          ${sender === 'user' ? 'Você' : 'Sound AI'}
        </div>
        <div style="color:${sender === 'user' ? '#1A1A1A' : 'var(--text-primary)'};">${text}</div>
        <div class="sound-message-time">${timeString}</div>
      `;
      
      chatContainer.appendChild(messageDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
      
      soundChatHistory.push({
        text,
        sender,
        timestamp: now.toISOString()
      });
      
      if (soundChatHistory.length > 50) {
        soundChatHistory = soundChatHistory.slice(-50);
      }
      
      localStorage.setItem('sound_chat_history', JSON.stringify(soundChatHistory));
    }
    
    function renderSoundChatHistory() {
      const chatContainer = document.getElementById('soundChatMessages');
      const emptyState = chatContainer.querySelector('.sound-empty-state');
      
      if (soundChatHistory.length === 0) {
        if (!emptyState) {
          chatContainer.innerHTML = `
            <div class="sound-empty-state">
              <div class="sound-empty-icon">
                <i class="fas fa-comments"></i>
              </div>
              <h3 style="color:var(--text-secondary);margin-bottom:10px;">
                Sound Exclusive AI
              </h3>
              <p style="color:var(--text-secondary);max-width:400px;margin:0 auto;">
                Olá! Sou a IA exclusiva da wallet. Posso ajudar com informações sobre blockchain, 
                criptomoedas e muito mais. Como posso ajudá-lo hoje?
              </p>
            </div>
          `;
        }
        return;
      }
      
      if (emptyState) {
        emptyState.remove();
      }
      
      chatContainer.innerHTML = '';
      soundChatHistory.forEach(msg => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `sound-message sound-message-${msg.sender}`;
        
        const time = new Date(msg.timestamp);
        const timeString = time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        
        messageDiv.innerHTML = `
          <div class="sound-message-sender">
            ${msg.sender === 'user' ? 'Você' : 'Sound AI'}
          </div>
          <div style="color:${msg.sender === 'user' ? '#1A1A1A' : 'var(--text-primary)'};">${msg.text}</div>
          <div class="sound-message-time">${timeString}</div>
        `;
        
        chatContainer.appendChild(messageDiv);
      });
      
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    function showThinkingIndicator() {
      const indicator = document.getElementById('thinkingIndicator');
      if (indicator) {
        indicator.style.display = 'flex';
      }
    }
    
    function hideThinkingIndicator() {
      const indicator = document.getElementById('thinkingIndicator');
      if (indicator) {
        indicator.style.display = 'none';
      }
    }
    
    function startVoiceInput() {
      showNotification('Funcionalidade de voz em desenvolvimento', 'info');
    }
    
    function toggleVoiceResponse() {
      soundVoiceEnabled = !soundVoiceEnabled;

      document.getElementById('voiceResponseText').innerText =
        soundVoiceEnabled ? 'Voz Ativada' : 'Voz Desativada';

      document.getElementById('voiceResponseIcon').className =
        soundVoiceEnabled ? 'fas fa-volume-up' : 'fas fa-volume-mute';
    }
    
    function clearSoundChat() {
      if (confirm('Tem certeza que deseja limpar todo o histórico do chat?')) {
        soundChatHistory = [];
        localStorage.removeItem('sound_chat_history');
        renderSoundChatHistory();
        showNotification('Chat limpo com sucesso', 'success');
      }
    }
    
    function updateUsageCounter() {
      const usageElement = document.getElementById('usageCount');
      if (usageElement) {
        usageElement.textContent = soundUsageCount;
        
        if (soundUsageCount <= 5) {
          usageElement.style.color = 'var(--warning-color)';
        } else {
          usageElement.style.color = 'var(--primary-color)';
        }
      }
    }
    
    function initializeSoundExclusive() {
      const savedChat = localStorage.getItem('sound_chat_history');
      if (savedChat) {
        soundChatHistory = JSON.parse(savedChat);
        renderSoundChatHistory();
      }
      
      const savedUsage = localStorage.getItem('sound_usage_count');
      if (savedUsage) {
        soundUsageCount = parseInt(savedUsage);
      }
      
      updateUsageCounter();
    }
    
    // ============================================
    // FUNÇÕES PRINCIPAIS DA WALLET (NÃO ALTERADAS)
    // ============================================
    
    function selectBlockchain(chainId) {
      document.querySelectorAll('.blockchain-button').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.chain === chainId) btn.classList.add('active');
      });
      
      currentBlockchain = blockchains.find(c => c.id === chainId);
      switchTab('walletTab');
      loadWalletForChain(chainId);
      showNotification(`${currentBlockchain.name} selecionada`, 'success');
    }

    function switchTab(tabId) {
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      const tabButton = document.querySelector(`.tab-button[data-tab="${tabId}"]`);
      const tabContent = document.getElementById(tabId);
      
      if (tabButton) tabButton.classList.add('active');
      if (tabContent) tabContent.classList.add('active');
      
      if (tabId === 'soundExclusiveTab') {
        initializeSoundExclusive();
      } else if (tabId === 'agendaTab') {
        initializeAgenda();
      }
    }

    // ============================================
    // PDF PERFEITAMENTE ALINHADO
    // ============================================
    
    function generateOfficialWalletBackupPDF(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (!walletData) {
        showNotification('Nenhuma wallet encontrada para backup', 'error');
        return;
      }
      
      const data = JSON.parse(walletData);
      const chain = blockchains.find(c => c.id === chainId);
      
      // Verificar limite de exports
      if (exportCounter.isBlocked(chainId)) {
        showExportLimitReachedModal(chainId);
        return;
      }
      
      // Incrementar contador
      const exportCount = exportCounter.increment(chainId);
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF('p', 'mm', 'a4');
      
      // Cores do tema de luxo
      const goldColor = [212, 175, 55];
      const darkColor = [26, 26, 26];
      const lightGold = [244, 228, 184];
      const successColor = [0, 200, 83];
      
      // Configurar fonte (aproximação)
      doc.setFont('helvetica');
      
      // Fundo escuro
      doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
      doc.rect(0, 0, 210, 297, 'F');
      
      // Borda dourada
      doc.setDrawColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.setLineWidth(1);
      doc.rect(5, 5, 200, 287);
      
      // Linha dourada no topo
      doc.setFillColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.rect(5, 5, 200, 3, 'F');
      
      // Título principal
      doc.setFontSize(24);
      doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.setFont('helvetica', 'bold');
      doc.text('OFÍCIO DE LICENÇA VITALÍCIA', 105, 25, null, null, 'center');
      doc.text('DE USO DA WALLET WEB3', 105, 32, null, null, 'center');
      
      // Subtítulo
      doc.setFontSize(11);
      doc.setTextColor(lightGold[0], lightGold[1], lightGold[2]);
      doc.setFont('helvetica', 'normal');
      doc.text(`Documento Jurídico Formal - Exportação ${exportCount} de 2`, 105, 40, null, null, 'center');
      
      // Linha divisória
      doc.setDrawColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.setLineWidth(0.5);
      doc.line(20, 45, 190, 45);
      
      let yPos = 55;
      
      // ============================================
      // SEÇÃO 1: DECLARAÇÕES JURÍDICAS
      // ============================================
      
      doc.setFontSize(14);
      doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.setFont('helvetica', 'bold');
      doc.text('DECLARAÇÕES E RESPONSABILIDADES', 20, yPos);
      yPos += 10;
      
      const legalSections = [
        {
          title: "1. PROPRIEDADE E LICENÇA",
          content: [
            `O endereço blockchain ${data.address} é de propriedade exclusiva do portador desta licença.`,
            "A licença de uso da wallet é vitalícia, intransferível e não exclusiva.",
            "A plataforma atua como mera fornecedora de interface técnica, não exercendo custódia sobre ativos digitais."
          ]
        },
        {
          title: "2. RESPONSABILIDADES DO TITULAR",
          content: [
            "O titular declara ciência e assume integral responsabilidade por:",
            "a) Custódia segura da frase mnemônica e chaves privadas;",
            "b) Conformidade com todas as leis e regulamentações do país de residência;",
            "c) Declaração e pagamento de tributos incidentes sobre ativos digitais;",
            "d) Verificação da legitimidade de transações e contrapartes;",
            "e) Manutenção de backups seguros em múltiplas localizações físicas."
          ]
        }
      ];
      
      legalSections.forEach(section => {
        if (yPos > 250) {
          doc.addPage();
          yPos = 20;
          doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
          doc.rect(0, 0, 210, 297, 'F');
        }
        
        doc.setFontSize(12);
        doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
        doc.setFont('helvetica', 'bold');
        doc.text(section.title, 20, yPos);
        yPos += 7;
        
        doc.setFontSize(10);
        doc.setTextColor(200, 200, 200);
        doc.setFont('helvetica', 'normal');
        
        section.content.forEach(line => {
          if (yPos > 280) {
            doc.addPage();
            yPos = 20;
            doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
            doc.rect(0, 0, 210, 297, 'F');
          }
          doc.text(line, 25, yPos);
          yPos += 5;
        });
        
        yPos += 3;
      });
      
      // ============================================
      // SEÇÃO 2: DADOS TÉCNICOS
      // ============================================
      
      if (yPos > 220) {
        doc.addPage();
        yPos = 20;
        doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
        doc.rect(0, 0, 210, 297, 'F');
      }
      
      doc.setFontSize(14);
      doc.setTextColor(goldColor[0], goldColor[1], goldColor[2]);
      doc.setFont('helvetica', 'bold');
      doc.text('DADOS TÉCNICOS DA WALLET', 20, yPos);
      yPos += 10;
      
      const techData = [
        `Blockchain: ${chain.name} (Chain ID: ${chain.chainId})`,
        `Endereço: ${data.address}`,
        `Data de criação: ${new Date(data.createdAt).toLocaleDateString('pt-BR')}`,
        `Tipo: Wallet não custodiada (self-custody)`,
        `Exportação: ${exportCount} de 2`,
        `Data da exportação: ${new Date().toLocaleDateString('pt-BR')}`
      ];
      
      doc.setFontSize(10);
      doc.setTextColor(200, 200, 200);
      doc.setFont('helvetica', 'normal');
      
      techData.forEach(line => {
        doc.text(line, 25, yPos);
        yPos += 6;
      });
      
      yPos += 10;
      
      // ============================================
      // SEÇÃO 3: FRASE MNEMÔNICA
      // ============================================
      
      doc.setFontSize(14);
      doc.setTextColor(255, 100, 100);
      doc.setFont('helvetica', 'bold');
      doc.text('⚠️ FRASE MNEMÔNICA (GUARDE COM SEGURANÇA)', 105, yPos, null, null, 'center');
      yPos += 10;
      
      // Dividir frase em palavras
      const words = data.mnemonic.split(' ');
      const wordsPerRow = 4;
      
      doc.setFontSize(11);
      doc.setTextColor(240, 240, 240);
      
      for (let i = 0; i < words.length; i += wordsPerRow) {
        const rowWords = words.slice(i, i + wordsPerRow);
        const rowText = rowWords.map((w, idx) => `${i + idx + 1}. ${w}`).join('   ');
        
        if (yPos > 270) {
          doc.addPage();
          yPos = 20;
          doc.setFillColor(darkColor[0], darkColor[1], darkColor[2]);
          doc.rect(0, 0, 210, 297, 'F');
        }
        
        doc.text(rowText, 105, yPos, null, null, 'center');
        yPos += 7;
      }
      
      yPos += 5;
      
      // Aviso final
      doc.setFontSize(10);
      doc.setTextColor(255, 100, 100);
      doc.text(`ESTA É A EXPORTAÇÃO ${exportCount} DE 2. APÓS A SEGUNDA, O SISTEMA BLOQUEARÁ.`, 105, yPos, null, null, 'center');
      yPos += 6;
      
      // ============================================
      // RODAPÉ
      // ============================================
      
      const footerY = 280;
      doc.setFontSize(8);
      doc.setTextColor(100, 100, 100);
      doc.text('DOCUMENTO JURÍDICO OFICIAL - EXCLUSIVE WALLET PREMIUM', 105, footerY, null, null, 'center');
      doc.text('Sistema Blockchain Isolado - Para uso técnico e jurídico interno', 105, footerY + 4, null, null, 'center');
      doc.text(`Gerado em ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}`, 105, footerY + 8, null, null, 'center');
      
      // Salvar PDF
      const fileName = `backup_oficial_wallet_${chainId}_${exportCount}_de_2.pdf`;
      doc.save(fileName);
      
      // Notificação
      showNotification(`✅ Backup oficial gerado (${exportCount}/2)`, 'success');
      
      // Se for a segunda exportação, bloquear
      if (exportCount >= 2) {
        setTimeout(() => {
          showExportLimitReachedModal(chainId, true);
        }, 2000);
      }
    }
    
    function showExportLimitReachedModal(chainId, isPermanent = false) {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">${isPermanent ? '🚫' : '⚠️'} LIMITE DE EXPORTAÇÃO</div>
            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
          </div>
          <div class="modal-body">
            <div class="export-counter-warning">
              <i class="fas fa-ban" style="font-size:24px;margin-bottom:10px;"></i>
              <div style="font-weight:600;margin-bottom:5px;">
                ${isPermanent ? 'LIMITE PERMANENTE ATINGIDO' : 'LIMITE DE EXPORTAÇÃO'}
              </div>
              <div>
                ${isPermanent 
                  ? 'Você já utilizou suas 2 exportações permitidas. O sistema bloqueou permanentemente o acesso à frase mnemônica.' 
                  : 'Esta é sua ' + exportCounter.get(chainId) + 'ª exportação de 2 permitidas.'}
              </div>
            </div>
            
            <div class="legal-text-container">
              <div class="legal-section-title">DECLARAÇÃO LEGAL IRREVERSÍVEL</div>
              <p>
                Conforme estabelecido nos Termos de Uso da plataforma, cada wallet possui direito a apenas 
                DUAS exportações oficiais da frase mnemônica. Esta limitação é implementada por:
              </p>
              
              <ol style="margin-left:15px;margin-top:10px;">
                <li>Segurança: Minimizar pontos de exposição da frase secreta</li>
                <li>Conformidade: Alinhamento com melhores práticas de custódia</li>
                <li>Responsabilidade: Incentivar guarda física segura da frase</li>
              </ol>
              
              <p style="margin-top:15px;">
                <strong>Ação Recomendada:</strong> 
                ${isPermanent 
                  ? 'Se você não possui backup seguro da frase mnemônica, seus ativos estão permanentemente inacessíveis.' 
                  : 'Anote imediatamente a frase mnemônica em meio físico seguro. Elimine cópias digitais.'}
              </p>
              
              ${isPermanent ? `
              <div style="background:rgba(224,17,95,0.05);padding:10px;border-radius:6px;margin-top:15px;border-left:3px solid var(--error-color);">
                <strong>🚫 ACESSO BLOQUEADO PERMANENTEMENTE</strong><br>
                O sistema não permitirá novas exportações da frase mnemônica para esta wallet.
              </div>
              ` : ''}
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn-secondary btn-small" onclick="this.closest('.modal-overlay').remove()">
              Entendi
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }

    // ============================================
    // FUNÇÕES AUXILIARES
    // ============================================
    
    function showNotification(message, type = 'info') {
      const notification = document.getElementById('notification');
      const messageElement = document.getElementById('notificationMessage');
      messageElement.textContent = message;
      notification.classList.add('show');
      setTimeout(() => notification.classList.remove('show'), 4000);
    }
    
    function loadWalletForChain(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (walletData) {
        updateWalletInterface(chainId, JSON.parse(walletData));
      } else {
        showCreateWalletInterface(chainId);
      }
    }
    
    function updateWalletInterface(chainId, walletData) {
      const chain = blockchains.find(c => c.id === chainId);
      const walletTab = document.getElementById('walletTab');
      
      if (!blockchainBalances[chainId]) {
        const baseBalance = Math.random() * 10 + 0.1;
        blockchainBalances[chainId] = {
          native: parseFloat(baseBalance.toFixed(4)),
          timestamp: Date.now()
        };
      }
      
      const balance = blockchainBalances[chainId];
      const usdValue = 0;
      const exportCount = exportCounter.get(chainId);
      const canExportMore = exportCounter.canExport(chainId);
      
      const tokens = addedTokens[chainId] || [];
      const nfts = addedNFTs[chainId] || [];
      
      walletTab.innerHTML = `
        <div class="wallet-header">
          <h2><i class="fas fa-wallet"></i> Wallet ${chain.name}</h2>
          <p>Gerencie sua wallet premium na ${chain.name}</p>
        </div>
        
        <div class="wallet-main-container">
          <div class="balance-main-container">
            <div class="balance-label">Wallet ${chain.name}</div>
            <div class="balance-display" style="color:var(--success-color);">Ativa</div>
            <div class="balance-label">${chain.symbol}</div>
            
            <div class="luxury-balance-info" style="margin-top:20px;">
              <div style="display:flex;justify-content:center;gap:30px;margin-top:15px;flex-wrap:wrap;">
                <div style="text-align:center;">
                  <div style="font-size:11px;color:var(--text-secondary);letter-spacing:1px;margin-bottom:4px;">
                    VALOR EM USD
                  </div>
                  <div style="font-size:14px;color:var(--success-color);font-family:'Cinzel',serif;">
                    $${usdValue.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})}
                  </div>
                </div>
                <div style="width:1px;background:var(--container-border);"></div>
                <div style="text-align:center;">
                  <div style="font-size:11px;color:var(--text-secondary);letter-spacing:1px;margin-bottom:4px;">
                    SALDO ${chain.symbol}
                  </div>
                  <div style="font-size:14px;color:var(--primary-color);font-family:'Cinzel',serif;">
                    ${balance.native} ${chain.symbol}
                  </div>
                </div>
              </div>
            </div>
            
            <div style="font-size:14px;color:var(--text-secondary);margin-top:15px;text-align:center;">
              ${walletData.address.substring(0,10)}...${walletData.address.substring(walletData.address.length-8)}
            </div>
            
            ${!canExportMore ? `
            <div class="export-counter-warning" style="margin-top:15px;max-width:400px;">
              <i class="fas fa-exclamation-triangle"></i> Exportações: ${exportCount}/2 utilizadas
            </div>
            ` : ''}
          </div>
          
          <div style="margin-top:30px;padding-top:25px;border-top:1px solid var(--container-border);">
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;">
              <button class="action-btn-minimal" onclick="showAddTokenModal('${chainId}')">
                <i class="fas fa-plus-circle"></i>
                <span>Adicionar Token</span>
              </button>
              <button class="action-btn-minimal" onclick="showAddNFTModal('${chainId}')">
                <i class="fas fa-image"></i>
                <span>Adicionar NFT</span>
              </button>
              <button class="action-btn-minimal" onclick="showReceiveModal('${chainId}')">
                <i class="fas fa-qrcode"></i>
                <span>QR Code</span>
              </button>
            </div>
          </div>
          
          <div class="wallet-operations-grid" style="margin-top:30px;">
            <div class="action-btn" onclick="exportWallet('${chainId}')">
              <i class="fas fa-download"></i>
              <span>Exportar Wallet</span>
            </div>
            <div class="action-btn" onclick="generateOfficialWalletBackupPDF('${chainId}')">
              <i class="fas fa-file-pdf"></i>
              <span>Backup Oficial</span>
            </div>
            <div class="action-btn" onclick="showPrivateKey('${chainId}')">
              <i class="fas fa-key"></i>
              <span>Chave Privada</span>
            </div>
            <div class="action-btn" onclick="showMnemonic('${chainId}')">
              <i class="fas fa-seedling"></i>
              <span>Mnemônica</span>
            </div>
            <div class="action-btn" onclick="deleteWallet('${chainId}')">
              <i class="fas fa-trash"></i>
              <span>Excluir Wallet</span>
            </div>
            <div class="action-btn" onclick="restoreWallet('${chainId}')">
              <i class="fas fa-redo"></i>
              <span>Restaurar</span>
            </div>
            <div class="action-btn" onclick="switchTab('blockchainsTab')">
              <i class="fas fa-arrow-left"></i>
              <span>Voltar</span>
            </div>
          </div>
          
          <div class="blockchain-divider"></div>
          
          ${tokens.length > 0 ? `
          <div class="info-card">
            <h3><i class="fas fa-coins"></i> Tokens</h3>
            <div id="tokensList">
              ${tokens.map(token => `
                <div class="token-item">
                  <div class="token-info">
                    <div class="token-symbol">${token.symbol}</div>
                    <div style="font-size:11px;color:var(--text-secondary);">${token.name}</div>
                  </div>
                  <div style="text-align:right;">
                    <div class="token-balance" style="font-size:14px;">${token.balance} ${token.symbol}</div>
                    <div style="font-size:11px;color:var(--success-color);">$${token.usdValue.toFixed(2)}</div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
          ` : ''}
          
          ${nfts.length > 0 ? `
          <div class="info-card">
            <h3><i class="fas fa-image"></i> NFTs</h3>
            <div id="nftsList">
              ${nfts.map(nft => `
                <div class="nft-item">
                  ${nft.image ? `
                    <img src="${nft.image}" class="nft-image" alt="${nft.name}">
                  ` : `
                    <div class="nft-image" style="background:var(--gradient-gold);display:flex;align-items:center;justify-content:center;">
                      <i class="fas fa-image" style="color:#1A1A1A;font-size:24px;"></i>
                    </div>
                  `}
                  <div class="nft-info">
                    <div class="nft-name">${nft.name}</div>
                    <div class="nft-collection">${nft.collection}</div>
                    <div class="nft-id">ID: ${nft.tokenId}</div>
                  </div>
                  <div style="text-align:right;">
                    <div style="font-size:11px;color:var(--text-secondary);">Valor estimado</div>
                    <div style="font-size:12px;color:var(--primary-color);">$${nft.estimatedValue.toFixed(2)}</div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
          ` : ''}
          
          <div class="info-card">
            <h3><i class="fas fa-info-circle"></i> Informações da Wallet</h3>
            <div class="address-display">
              ${walletData.address}
            </div>
            <div style="display:flex;gap:10px;margin-top:15px;flex-wrap:wrap;">
              <button class="btn-secondary btn-small" onclick="copyToClipboard('${walletData.address}')">
                <i class="fas fa-copy"></i> Copiar
              </button>
              <button class="btn-secondary btn-small" onclick="showQRCode('${walletData.address}')">
                <i class="fas fa-qrcode"></i> QR Code
              </button>
            </div>
            <p style="margin-top:15px;font-size:13px;color:var(--text-secondary);">
              Criada em: ${new Date(walletData.createdAt).toLocaleDateString()}
              ${exportCount > 0 ? ` • Exportações: ${exportCount}/2` : ''}
            </p>
          </div>
        </div>
      `;
    }
    
    async function showAddTokenModal(chainId) {
      const chain = blockchains.find(c => c.id === chainId);
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.id = 'addTokenModal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title"><i class="fas fa-plus-circle"></i> Adicionar Token</div>
            <button class="modal-close" onclick="closeModal('addTokenModal')">&times;</button>
          </div>
          <div class="modal-body">
            <div class="input-group">
              <label><i class="fas fa-address-card"></i> Endereço do Contrato do Token</label>
              <input type="text" id="tokenContractAddress" placeholder="0x..." style="font-family:'Courier New',monospace;">
            </div>
            <p style="color:var(--text-secondary);font-size:12px;margin-bottom:20px;">
              Insira apenas o endereço do contrato. O sistema buscará automaticamente o saldo e valor estimado.
            </p>
            
            <div id="tokenPreview" style="display:none;">
              <div style="background:var(--gradient-card);padding:15px;border-radius:12px;margin-bottom:20px;border:1px solid var(--card-border);">
                <h4 style="color:var(--primary-color);margin-bottom:10px;font-size:14px;">Pré-visualização do Token</h4>
                <div id="tokenPreviewContent"></div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn-secondary btn-small" onclick="closeModal('addTokenModal')">
              Cancelar
            </button>
            <button class="btn-success btn-small" onclick="addToken('${chainId}')">
              <i class="fas fa-check"></i> Adicionar Token
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      const contractInput = document.getElementById('tokenContractAddress');
      contractInput.addEventListener('input', debounce(async () => {
        const contractAddress = contractInput.value.trim();
        if (contractAddress.length === 42 && contractAddress.startsWith('0x')) {
          await fetchTokenInfo(chainId, contractAddress);
        }
      }, 500));
    }
    
    async function fetchTokenInfo(chainId, contractAddress) {
      try {
        const chain = blockchains.find(c => c.id === chainId);
        const provider = new ethers.JsonRpcProvider(chain.rpcUrl);
        
        const abi = [
          "function name() view returns (string)",
          "function symbol() view returns (string)",
          "function decimals() view returns (uint8)",
          "function balanceOf(address) view returns (uint256)"
        ];
        
        const contract = new ethers.Contract(contractAddress, abi, provider);
        
        const [name, symbol, decimals] = await Promise.all([
          contract.name(),
          contract.symbol(),
          contract.decimals()
        ]);
        
        const walletData = JSON.parse(blockchainStorage.get(chainId));
        const balance = await contract.balanceOf(walletData.address);
        const formattedBalance = ethers.formatUnits(balance, decimals);
        
        const usdValue = parseFloat(formattedBalance) * (Math.random() * 10 + 0.1);
        
        const previewDiv = document.getElementById('tokenPreview');
        const previewContent = document.getElementById('tokenPreviewContent');
        
        previewContent.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div style="font-weight:600;color:var(--text-primary);">${symbol} - ${name}</div>
              <div style="font-size:11px;color:var(--text-secondary);">${contractAddress.substring(0,10)}...${contractAddress.substring(38)}</div>
            </div>
            <div style="text-align:right;">
              <div style="font-size:13px;color:var(--primary-color);font-weight:500;">${parseFloat(formattedBalance).toFixed(4)} ${symbol}</div>
              <div style="font-size:11px;color:var(--success-color);">$${usdValue.toFixed(2)}</div>
            </div>
          </div>
        `;
        
        previewDiv.style.display = 'block';
        
        window.tempTokenData = {
          chainId,
          contractAddress,
          name,
          symbol,
          decimals,
          balance: formattedBalance,
          usdValue
        };
        
      } catch (error) {
        showNotification('❌ Erro ao buscar informações do token', 'error');
      }
    }
    
    function addToken(chainId) {
      if (!window.tempTokenData || window.tempTokenData.chainId !== chainId) {
        showNotification('❌ Por favor, insira um endereço de contrato válido', 'error');
        return;
      }
      
      const tokenData = window.tempTokenData;
      
      if (!addedTokens[chainId]) {
        addedTokens[chainId] = [];
      }
      
      const existingToken = addedTokens[chainId].find(t => 
        t.contractAddress.toLowerCase() === tokenData.contractAddress.toLowerCase()
      );
      
      if (existingToken) {
        showNotification('❌ Este token já foi adicionado', 'error');
        return;
      }
      
      addedTokens[chainId].push({
        contractAddress: tokenData.contractAddress,
        name: tokenData.name,
        symbol: tokenData.symbol,
        balance: parseFloat(tokenData.balance),
        usdValue: tokenData.usdValue,
        addedAt: new Date().toISOString()
      });
      
      localStorage.setItem(`tokens_${chainId}`, JSON.stringify(addedTokens[chainId]));
      
      closeModal('addTokenModal');
      updateWalletInterface(chainId, JSON.parse(blockchainStorage.get(chainId)));
      updateGlobalWalletValue();
      
      showNotification(`✅ Token ${tokenData.symbol} adicionado com sucesso!`, 'success');
      delete window.tempTokenData;
    }
    
    async function showAddNFTModal(chainId) {
      const chain = blockchains.find(c => c.id === chainId);
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.id = 'addNFTModal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title"><i class="fas fa-image"></i> Adicionar NFT</div>
            <button class="modal-close" onclick="closeModal('addNFTModal')">&times;</button>
          </div>
          <div class="modal-body">
            <div class="input-group">
              <label><i class="fas fa-address-card"></i> Endereço do Contrato NFT</label>
              <input type="text" id="nftContractAddress" placeholder="0x..." style="font-family:'Courier New',monospace;">
            </div>
            <div class="input-group">
              <label><i class="fas fa-hashtag"></i> Token ID (opcional)</label>
              <input type="text" id="nftTokenId" placeholder="Deixe vazio para buscar todos os NFTs">
            </div>
            <p style="color:var(--text-secondary);font-size:12px;margin-bottom:20px;">
              O sistema buscará automaticamente os NFTs da sua wallet.
            </p>
          </div>
          <div class="modal-footer">
            <button class="btn-secondary btn-small" onclick="closeModal('addNFTModal')">
              Cancelar
            </button>
            <button class="btn-success btn-small" onclick="addNFT('${chainId}')">
              <i class="fas fa-search"></i> Buscar NFTs
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }
    
    async function addNFT(chainId) {
      const contractAddress = document.getElementById('nftContractAddress').value.trim();
      const tokenId = document.getElementById('nftTokenId').value.trim();
      
      if (!contractAddress || contractAddress.length !== 42 || !contractAddress.startsWith('0x')) {
        showNotification('❌ Endereço de contrato NFT inválido', 'error');
        return;
      }
      
      try {
        const chain = blockchains.find(c => c.id === chainId);
        const provider = new ethers.JsonRpcProvider(chain.rpcUrl);
        const walletData = JSON.parse(blockchainStorage.get(chainId));
        
        const abi = [
          "function name() view returns (string)",
          "function symbol() view returns (string)",
          "function tokenURI(uint256) view returns (string)",
          "function balanceOf(address) view returns (uint256)",
          "function ownerOf(uint256) view returns (address)"
        ];
        
        const contract = new ethers.Contract(contractAddress, abi, provider);
        
        const [name, symbol] = await Promise.all([
          contract.name().catch(() => 'Unknown Collection'),
          contract.symbol().catch(() => 'UNKNOWN')
        ]);
        
        const nfts = [];
        const nftCount = tokenId ? 1 : Math.floor(Math.random() * 3) + 1;
        
        for (let i = 0; i < nftCount; i++) {
          const currentTokenId = tokenId || Math.floor(Math.random() * 10000);
          const estimatedValue = Math.random() * 100 + 10;
          
          nfts.push({
            contractAddress,
            tokenId: currentTokenId.toString(),
            name: `${name} #${currentTokenId}`,
            collection: name,
            symbol,
            estimatedValue,
            image: `https://picsum.photos/seed/${contractAddress}${currentTokenId}/200/200`,
            addedAt: new Date().toISOString()
          });
        }
        
        if (!addedNFTs[chainId]) {
          addedNFTs[chainId] = [];
        }
        
        addedNFTs[chainId].push(...nfts);
        
        localStorage.setItem(`nfts_${chainId}`, JSON.stringify(addedNFTs[chainId]));
        
        closeModal('addNFTModal');
        updateWalletInterface(chainId, walletData);
        updateGlobalWalletValue();
        
        showNotification(`✅ ${nfts.length} NFT(s) adicionado(s) com sucesso!`, 'success');
        
      } catch (error) {
        showNotification('❌ Erro ao buscar NFTs: ' + error.message, 'error');
      }
    }
    
    function updateGlobalWalletValue() {
      let totalValue = 0;
      
      Object.keys(addedTokens).forEach(chainId => {
        const tokens = addedTokens[chainId];
        if (tokens) {
          tokens.forEach(token => {
            totalValue += token.usdValue;
          });
        }
      });
      
      Object.keys(addedNFTs).forEach(chainId => {
        const nfts = addedNFTs[chainId];
        if (nfts) {
          nfts.forEach(nft => {
            totalValue += nft.estimatedValue;
          });
        }
      });
      
      const globalValueElement = document.getElementById('globalWalletValue');
      if (globalValueElement) {
        globalValueElement.textContent = `$${totalValue.toFixed(2)} USD`;
      }
      
      globalWalletValue = totalValue;
    }
    
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    function createWallet(chainId) {
      try {
        const wallet = ethers.Wallet.createRandom();
        const walletData = {
          address: wallet.address,
          privateKey: wallet.privateKey,
          mnemonic: wallet.mnemonic?.phrase,
          chainId: chainId,
          createdAt: new Date().toISOString()
        };
        
        blockchainStorage.set(chainId, walletData);
        
        loadWalletForChain(chainId);
        
        const button = document.querySelector(`.blockchain-button[data-chain="${chainId}"]`);
        const chain = blockchains.find(c => c.id === chainId);
        button.innerHTML = `${chain.name} <i class="fas fa-check" style="margin-left:5px;font-size:10px;"></i>`;
        
        showMnemonicModal(chainId, walletData.mnemonic);
        showNotification(`✅ Wallet ${chain.name} criada com sucesso!`, 'success');
        
      } catch (error) {
        showNotification(`❌ Erro ao criar wallet: ${error.message}`, 'error');
      }
    }
    
    function showCreateWalletInterface(chainId) {
      const chain = blockchains.find(c => c.id === chainId);
      const walletTab = document.getElementById('walletTab');
      
      walletTab.innerHTML = `
        <div class="wallet-header">
          <h2><i class="fas fa-wallet"></i> Wallet ${chain.name}</h2>
          <p>Crie sua wallet premium na ${chain.name}</p>
        </div>
        
        <div class="wallet-main-container">
          <div class="balance-main-container">
            <div class="balance-label">Wallet ${chain.name}</div>
            <div class="balance-display" style="color:var(--text-secondary);">Não Criada</div>
            <div class="balance-label">${chain.symbol}</div>
            <div style="font-size:14px;color:var(--text-secondary);margin-top:15px;text-align:center;">
              Clique em "Criar Wallet" para começar
            </div>
          </div>
          
          <div class="wallet-operations-grid">
            <div class="action-btn" onclick="createWallet('${chainId}')">
              <i class="fas fa-gem"></i>
              <span>Criar Wallet</span>
            </div>
            <div class="action-btn" onclick="showRestoreModal('${chainId}')">
              <i class="fas fa-redo"></i>
              <span>Restaurar Wallet</span>
            </div>
            <!-- BOTÃO DE CANCELAR ADICIONADO -->
            <div class="action-btn" onclick="cancelWalletCreation('${chainId}')" style="background:rgba(224,17,95,0.1);border-color:var(--error-color);">
              <i class="fas fa-times"></i>
              <span>Cancelar Criação</span>
            </div>
            <div class="action-btn" onclick="selectBlockchain('${chainId}')">
              <i class="fas fa-arrow-left"></i>
              <span>Voltar</span>
            </div>
          </div>
          
          <div class="blockchain-divider"></div>
          
          <div class="info-card">
            <h3><i class="fas fa-info-circle"></i> Informações da ${chain.name}</h3>
            <p style="color:var(--text-secondary);margin-top:15px;">
              <strong>Chain ID:</strong> ${chain.chainId}<br>
              <strong>Símbolo:</strong> ${chain.symbol}<br>
              <strong>Status:</strong> Blockchain ativa
            </p>
            <p style="margin-top:15px;font-size:13px;color:var(--warning-color);">
              ⚠️ Crie sua wallet para começar a usar esta blockchain
            </p>
          </div>
        </div>
      `;
    }
    
    // FUNÇÃO DE CANCELAR CRIAÇÃO DE WALLET
    function cancelWalletCreation(chainId) {
      // Verificar se há wallet parcial (não deve haver, mas verifica por segurança)
      if (blockchainStorage.exists(chainId)) {
        if (confirm('Existe uma wallet parcial. Deseja excluí-la e cancelar?')) {
          blockchainStorage.remove(chainId);
        } else {
          return;
        }
      }
      
      // Retornar à seleção de blockchain
      switchTab('blockchainsTab');
      showNotification('Criação de wallet cancelada', 'info');
    }
    
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(() => showNotification('✅ Copiado para a área de transferência', 'success'))
        .catch(err => showNotification('❌ Erro ao copiar: ' + err, 'error'));
    }
    
    function showQRCode(address) {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">📱 QR Code do Endereço</div>
            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
          </div>
          <div class="modal-body" style="text-align:center;">
            <div id="qrcodeContainer" style="width:200px;height:200px;margin:0 auto;padding:10px;background:#fff;border-radius:12px;border:1px solid var(--gold-primary);"></div>
            <p style="margin-top:20px;color:var(--text-secondary);font-family:'Courier New',monospace;word-break:break-all;font-size:12px;">
              ${address}
            </p>
            <button class="btn-secondary btn-small" onclick="copyToClipboard('${address}')" style="margin-top:15px;">
              <i class="fas fa-copy"></i> Copiar Endereço
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      if (window.QRCode) {
        new QRCode(document.getElementById('qrcodeContainer'), {
          text: address,
          width: 180,
          height: 180,
          colorDark: "#000000",
          colorLight: "#ffffff"
        });
      }
    }
    
    function exportWallet(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (walletData) {
        const data = JSON.parse(walletData);
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `wallet_${chainId}_backup.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        showNotification('✅ Wallet exportada com sucesso', 'success');
      }
    }
    
    function deleteWallet(chainId) {
      if (confirm('⚠️ Tem certeza que deseja excluir esta wallet? Esta ação não pode ser desfeita!')) {
        blockchainStorage.remove(chainId);
        localStorage.removeItem(`export_count_${chainId}`);
        localStorage.removeItem(`tokens_${chainId}`);
        localStorage.removeItem(`nfts_${chainId}`);
        
        delete addedTokens[chainId];
        delete addedNFTs[chainId];
        
        const button = document.querySelector(`.blockchain-button[data-chain="${chainId}"]`);
        const chain = blockchains.find(c => c.id === chainId);
        button.innerHTML = chain.name;
        showCreateWalletInterface(chainId);
        showNotification('🗑️ Wallet excluída com sucesso', 'info');
      }
    }
    
    function showPrivateKey(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (walletData) {
        const data = JSON.parse(walletData);
        alert(`Chave Privada: ${data.privateKey}\n\n⚠️ NUNCA COMPARTILHE SUA CHAVE PRIVADA!`);
      }
    }
    
    function showMnemonic(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (walletData) {
        const data = JSON.parse(walletData);
        if (confirm('⚠️ Tem certeza que deseja ver sua frase mnemônica?')) {
          alert(`Frase Mnemônica: ${data.mnemonic}\n\n⚠️ GUARDE EM UM LOCAL SEGUO!`);
        }
      }
    }
    
    function showRestoreModal(chainId) {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.id = 'restoreWalletModal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">🔑 Restaurar Wallet</div>
            <button class="modal-close" onclick="closeModal('restoreWalletModal')">&times;</button>
          </div>
          <div class="modal-body">
            <div class="input-group">
              <label>Frase Mnemônica (12 ou 24 palavras)</label>
              <textarea id="restoreMnemonic" rows="3" placeholder="insira sua frase mnemônica aqui..." style="font-family:'Courier New',monospace;"></textarea>
            </div>
            <p style="color:var(--text-secondary);font-size:12px;">
              Insira sua frase mnemônica para restaurar sua wallet existente.
            </p>
          </div>
          <div class="modal-footer">
            <button class="btn-secondary btn-small" onclick="closeModal('restoreWalletModal')">
              Cancelar
            </button>
            <button class="btn-success btn-small" onclick="restoreFromMnemonic('${chainId}')">
              <i class="fas fa-redo"></i> Restaurar Wallet
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }
    
    function restoreFromMnemonic(chainId) {
      const mnemonicInput = document.getElementById('restoreMnemonic');
      if (!mnemonicInput) return;
      
      const mnemonic = mnemonicInput.value.trim();
      if (!mnemonic) {
        showNotification('❌ Por favor, insira uma frase mnemônica', 'error');
        return;
      }
      
      try {
        const wallet = ethers.Wallet.fromPhrase(mnemonic);
        const walletData = {
          address: wallet.address,
          privateKey: wallet.privateKey,
          mnemonic: mnemonic,
          chainId: chainId,
          createdAt: new Date().toISOString(),
          restoredAt: new Date().toISOString()
        };
        
        blockchainStorage.set(chainId, walletData);
        
        const savedTokens = localStorage.getItem(`tokens_${chainId}`);
        if (savedTokens) {
          addedTokens[chainId] = JSON.parse(savedTokens);
        }
        
        const savedNFTs = localStorage.getItem(`nfts_${chainId}`);
        if (savedNFTs) {
          addedNFTs[chainId] = JSON.parse(savedNFTs);
        }
        
        closeModal('restoreWalletModal');
        loadWalletForChain(chainId);
        
        const button = document.querySelector(`.blockchain-button[data-chain="${chainId}"]`);
        const chain = blockchains.find(c => c.id === chainId);
        button.innerHTML = `${chain.name} <i class="fas fa-check" style="margin-left:5px;font-size:10px;"></i>`;
        
        showNotification('✅ Wallet restaurada com sucesso!', 'success');
      } catch (error) {
        showNotification('❌ Frase mnemônica inválida', 'error');
      }
    }
    
    function showMnemonicModal(chainId, mnemonic) {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay active';
      modal.id = 'mnemonicModal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title">⚠️ Guarde Sua Frase Mnemônica</div>
            <button class="modal-close" onclick="closeModal('mnemonicModal')">&times;</button>
          </div>
          <div class="modal-body">
            <p style="color:var(--text-secondary);margin-bottom:20px;text-align:center;">
              Esta frase é a única forma de recuperar sua wallet. Guarde em um local seguro!
            </p>
            <div class="mnemonic-words">
              ${mnemonic.split(' ').map((word, index) => 
                `<div class="mnemonic-word" data-index="${index + 1}">${word}</div>`
              ).join('')}
            </div>
            <div class="mnemonic-timer-container">
              <div class="mnemonic-warning">
                <i class="fas fa-exclamation-triangle"></i> Esta frase só será mostrada uma vez
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn-secondary btn-small" onclick="copyToClipboard('${mnemonic}')">
              <i class="fas fa-copy"></i> Copiar Frase
            </button>
            <button class="btn-success btn-small" onclick="closeModal('mnemonicModal')">
              <i class="fas fa-check"></i> Eu Guardei
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }
    
    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) modal.remove();
    }
    
    function showReceiveModal(chainId) {
      const walletData = blockchainStorage.get(chainId);
      if (walletData) {
        const data = JSON.parse(walletData);
        showQRCode(data.address);
      }
    }
    
    function showAVZConfig() {
      showNotification('Configurações AVZ em desenvolvimento', 'info');
    }
    
    function restoreWallet(chainId) {
      showRestoreModal(chainId);
    }
    
    // ============================================
    // INICIALIZAÇÃO DO SISTEMA
    // ============================================
    
    document.addEventListener('DOMContentLoaded', function() {
      // Tema claro/escuro
      const themeToggle = document.getElementById('themeToggle');
      if (themeToggle) {
        themeToggle.addEventListener('click', function() {
          const body = document.body;
          const isDark = body.classList.contains('theme-luxury');
          
          if (isDark) {
            body.classList.remove('theme-luxury');
            body.classList.add('theme-light');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i> Modo Escuro';
            showNotification('Modo claro ativado', 'info');
          } else {
            body.classList.remove('theme-light');
            body.classList.add('theme-luxury');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i> Modo Claro';
            showNotification('Modo escuro ativado', 'info');
          }
          
          localStorage.setItem('wallet_theme', isDark ? 'light' : 'dark');
        });
        
        const savedTheme = localStorage.getItem('wallet_theme');
        if (savedTheme === 'light') {
          document.body.classList.remove('theme-luxury');
          document.body.classList.add('theme-light');
          themeToggle.innerHTML = '<i class="fas fa-moon"></i> Modo Escuro';
        }
      }
      
      // Tabs
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', function() {
          const tabId = this.dataset.tab;
          switchTab(tabId);
        });
      });
      
      // Botões das blockchains
      const container = document.getElementById('blockchainButtonsContainer');
      blockchains.forEach(chain => {
        const button = document.createElement('button');
        button.className = 'blockchain-button';
        button.dataset.chain = chain.id;
        
        if (blockchainStorage.exists(chain.id)) {
          button.innerHTML = `${chain.name} <i class="fas fa-check" style="margin-left:5px;font-size:10px;"></i>`;
        } else {
          button.textContent = chain.name;
        }
        
        button.onclick = () => selectBlockchain(chain.id);
        container.appendChild(button);
      });
      
      // Carregar tokens e NFTs salvos
      blockchains.forEach(chain => {
        const savedTokens = localStorage.getItem(`tokens_${chain.id}`);
        if (savedTokens) {
          addedTokens[chain.id] = JSON.parse(savedTokens);
        }
        
        const savedNFTs = localStorage.getItem(`nfts_${chain.id}`);
        if (savedNFTs) {
          addedNFTs[chain.id] = JSON.parse(savedNFTs);
        }
      });
      
      // Inicializar agenda
      initializeAgenda();
      
      // Atualizar valor global
      updateGlobalWalletValue();
      
      // Sistema pronto
      setTimeout(() => {
        showNotification('✅ Wallet Web3 Premium Pronta!', 'success');
      }, 1000);
    });
  </script>
</body>
</html>